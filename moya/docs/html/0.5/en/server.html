<!DOCTYPE html>
<!-- saved from url=(0065)http://twitter.github.io/bootstrap/examples/starter-template.html -->
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Creating a Server</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Le styles -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="assets/css/custom.css" rel="stylesheet">

        <style>
        
        </style>
    </head>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

  <body>
    <div id="wrap">
    <div id="main-nav" class="navbar navbar-default navbar-static-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".doc-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Moya Documentation</a>
            </div>
            <nav class="collapse navbar-collapse doc-navbar-collapse" role="navigation">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="index.html">Reference</a>
                    </li>
                    <li >
                        <a href="tags/index.html">Tags</a>
                    </li>
                    <li >
                        <a href="tutorial.html">Tutorial</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    
<div class="container">
    <div class="row">
        <div class="doc-content col-md-9">
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="project.html">&larr; 8. Building a Project</a>
        </li>
        
        <li class="next">
            <a href="library.html">10. Creating a Library &rarr;</a>
        </li>
    </ul>
</div>


            <h1>Creating a Server</h1>
            <p>Once Moya has read the initial settings file, it runs the Moya Code file specified in the <code>startup</code> setting in the <code>[project]</code> section. This file (typically called <code>server.xml</code>) contains one or more <a class="tag" href="tags/httpmoyaprojectcom/tag_server.html">&lt;server&gt;</a> tags which are responsible for <em>importing</em> libraries and installing <em>applications</em>.</p>
<p>By default, Moya runs the <a class="tag" href="tags/httpmoyaprojectcom/tag_server.html">&lt;server&gt;</a> tag which has its <code>docname</code> attribute set to <code>main</code>. Most projects will only define this single server, but it is possible to have multiple servers defined. You can run an alternative <a class="tag" href="tags/httpmoyaprojectcom/tag_server.html">&lt;server&gt;</a> by specifying it on the command line. For example, the following would run a server with a docname of <code>"alternative"</code>:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;runserver&nbsp;--server&nbsp;alternative</div></pre><h2><a name="server-definition"></a><a href="#server-definition">Server Definition<span class="anchor"> &#182;</span></a></h2><p>Let's look at a server definition. The following is taken from a project created with <code>moya start</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"><br></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;Initialize&nbsp;a&nbsp;server&nbsp;--&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">server</span><span class="tag tagcontent">&nbsp;docname=</span><span class="attrib tag tagcontent">"main"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"><br></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">log</span><span class="tag">&gt;</span>Starting&nbsp;up!</span><span class="tag">&lt;</span><span class="endtagname tag">/log</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"><br></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;Import&nbsp;libraries&nbsp;for&nbsp;use&nbsp;in&nbsp;your&nbsp;project&nbsp;--&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.debug"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">".debug"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.auth"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.session"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.admin"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.static"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.favicon"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.welcome"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.links"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.bootstrap"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.forms"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.widgets"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line20"></a><div class="line line-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.comments"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line21"></a><div class="line line-21">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.pages"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line22"></a><div class="line line-22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.blog"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line23"></a><div class="line line-23">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.feedback"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line24"></a><div class="line line-24">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.jsonrpc"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line25"></a><div class="line line-25">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.wysihtml5"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line26"></a><div class="line line-26"><br></div><a name="line27"></a><div class="line line-27">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;The&nbsp;'site'&nbsp;library,&nbsp;for&nbsp;non&nbsp;reusable&nbsp;content&nbsp;--&gt;</span></div><a name="line28"></a><div class="line line-28">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;location=</span><span class="attrib tag tagcontent">"./site"</span><span class="tag tagcontent">&nbsp;priority=</span><span class="attrib tag tagcontent">"10"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line29"></a><div class="line line-29">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"site"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"site.intended-for-humans"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line30"></a><div class="line line-30"><br></div><a name="line31"></a><div class="line line-31">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;Install&nbsp;applications&nbsp;(instances&nbsp;of&nbsp;a&nbsp;library)&nbsp;--&gt;</span></div><a name="line32"></a><div class="line line-32">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"forms"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.forms"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line33"></a><div class="line line-33">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"auth"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.auth"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line34"></a><div class="line line-34">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"session"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.session"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line35"></a><div class="line line-35">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"admin"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.admin"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/admin/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line36"></a><div class="line line-36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"media"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.static"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/static/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line37"></a><div class="line line-37">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"debug"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.debug"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/debug/"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">".debug"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line38"></a><div class="line line-38">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"bootstrap"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.twitter.bootstrap"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line39"></a><div class="line line-39">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"welcome"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.welcome"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line40"></a><div class="line line-40">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"links"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.links"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line41"></a><div class="line line-41">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"favicon"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.favicon"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line42"></a><div class="line line-42">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"comments"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.comments"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/comments/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line43"></a><div class="line line-43">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"pages"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.pages"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line44"></a><div class="line line-44">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"blog"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.blog"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/blog/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line45"></a><div class="line line-45">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"feedback"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.feedback"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/feedback/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line46"></a><div class="line line-46">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"jsonrpc"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.jsonrpc"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/jsonrpc/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line47"></a><div class="line line-47">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"wysihtml5"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.wysihtml5"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line48"></a><div class="line line-48"><br></div><a name="line49"></a><div class="line line-49">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/server</span><span class="tag">&gt;</span></div><a name="line50"></a><div class="line line-50"><br></div><a name="line51"></a><div class="line line-51"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>A server definition is executable Moya code. Moya runs each tag, line by line. If you have logging enable you should see the effect of each of these statements in the logs.</p>
<p>You can also step through the startup process in the debugger with the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;runserver&nbsp;--breakpoint-startup</div></pre><h2><a name="importing-libraries"></a><a href="#importing-libraries">Importing Libraries<span class="anchor"> &#182;</span></a></h2><p>The first line in the above server definition is a <a class="tag" href="tags/httpmoyaprojectcom/tag_log.html">&lt;log&gt;</a> tag which simply writes some text to the logs. Not strictly necessary, but this may be helpful if you have more than one server. What follows are a number of <a class="tag" href="tags/httpmoyaprojectcom/tag_import.html">&lt;import&gt;</a> tags, which load the code associated with each library that will be used in the project. A library must be imported before it can serve content. Let's look at the first <a class="tag" href="tags/httpmoyaprojectcom/tag_import.html">&lt;import&gt;</a> tag:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.debug"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">".debug"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>This loads the library in Python module <code>moya.libs.debug</code>, which is a Moya built in library that provides error pages and other helpful content for development. There is also an <code>if</code> attribute which tests the value of <code>.debug</code> &ndash; so <code>moya.debug</code> is only imported if Moya is in debug mode (set in settings).</p>
<p>The <code>py</code> attribute is required only if the library is distributed as a Python module. Moya's built in libraries are distributed in this way, but more typically libraries are simply stored in the project source. By convention, the location for libraries is <code>local/</code> for libraries you have built yourself, and <code>external/</code> for other libraries. To load libraries from the project directory, use the <code>location</code> attribute, rather than <code>py</code>. Here's an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;location=</span><span class="attrib tag tagcontent">"./local/sushifinder.shop"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>An <a class="tag" href="tags/httpmoyaprojectcom/tag_import.html">&lt;import&gt;</a> tag may also contain a <code>priority</code> attribute, which should be an integer value. It is possible to override tags in one library from another (in order to customize content). You might want to add a field to a form defined in an external library, for example. The <code>priority</code> attribute is used to determine which tag is used &ndash; the library with highest priority wins. This feature is used in the server definition above to import the <em>site</em> library, with the following line:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;location=</span><span class="attrib tag tagcontent">"./site"</span><span class="tag tagcontent">&nbsp;priority=</span><span class="attrib tag tagcontent">"10"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>Here the site library is imported from <code>./site</code> and assigned a priority of <code>10</code>. The default priority is <code>0</code>, so the site library can override tags from all other libraries.</p>
<p>The <em>site</em> library should contain non-reusable content and is generally used to customize the look and feel of a web-site. By convention, it is stored in the <code>/site</code>. Moya doesn't require a site library; so if you find you don't have any use for it, you may delete it from the project.</p>
<p>Once a library is been imported, it may be <em>installed</em>. Installing allows you the library code to respond to URLs and generate responses. To install a library you need to refer to it by its <em>long name</em>, which is a period separated list of tokens. The first token identifies the author or organization, subsequent tokens are used to create a simple namespace to identify the library. Generally though, long names will be in the form of <code>&lt;organization&gt;.&lt;name of library&gt;</code>. For example, <code>moya.auth</code> is the Moya authorization library.</p>
<h2><a name="installing-libraries"></a><a href="#installing-libraries">Installing Libraries<span class="anchor"> &#182;</span></a></h2><p>The <a class="tag" href="tags/httpmoyaprojectcom/tag_install.html">&lt;install&gt;</a> tag installs libraries. It requires an attribute, <code>lib</code>, containing the long name of the library, and and attribute called <code>name</code>, which should be a name to identify the application (installed library). An application name should be short and descriptive, and contain no periods. It may be refereed to as a <em>short name</em>.</p>
<aside>Remember that libraries may be installed more than once as different applications, each with independent settings.</aside><p>Immediately following on from the site library import is the following line:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"site"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"site.intended-for-humans"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>This installs the library <code>site.intended-for-humans</code> as an application called <code>site</code>. There is also an additional attribute, <code>mount</code>, which takes a URL segment where the application will be <em>mounted</em>. In this case, the application is mounted on <code>/</code> which means that it can handle all URLs in the project. Other applications will be mounted in different locations. For example the library <code>moya.admin</code> is mounted on <code>/admin/</code> &ndash; so the admin site may accessed from <code>/admin/</code>.</p>
<p>Note that if an application doesn't produce a response for the requested URL, Moya will check the next mounted application until a response can be generated.</p>
<h2><a name="mounting-applications"></a><a href="#mounting-applications">Mounting Applications<span class="anchor"> &#182;</span></a></h2><p>The <code>mount</code> attribute in the <a class="tag" href="tags/httpmoyaprojectcom/tag_install.html">&lt;install&gt;</a> tag is a convenient shortcut which is adequate for most libraries, but applications may also be mounted with the <a class="tag" href="tags/httpmoyaprojectcom/tag_mount.html">&lt;mount&gt;</a> tag. It is possible for libraries to contain multiple <em>mountpoints</em>, which handle a number of related URLs. These can be mounted individually in different locations; so you can decide to access them from different top level urls, or even pick and choose which mountpoints you want to enable.</p>
<p>The <a class="tag" href="tags/httpmoyaprojectcom/tag_mount.html">&lt;mount&gt;</a> tag takes three required attributes; <code>app</code> is the name for the new application, <code>mountpoint</code> is the name of the mountpoint you want to mount, and <code>url</code> is the url segment where you want to mount the application. For example, we could have installed and mounted the site application with the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"site"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"site.intended-for-humans"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">mount</span><span class="tag tagcontent">&nbsp;app=</span><span class="attrib tag tagcontent">"site"</span><span class="tag tagcontent">&nbsp;url=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;mountpoint=</span><span class="attrib tag tagcontent">"main"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>Most libraries will contain a single mountpoint with a name of <code>"main"</code>, which is also the default value for <code>mountpoint</code> in the <a class="tag" href="tags/httpmoyaprojectcom/tag_mount.html">&lt;mount&gt;</a> tag; so you can omit the <code>mountpoint</code> attribute in most cases.</p>
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="project.html">&larr; 8. Building a Project</a>
        </li>
        
        <li class="next">
            <a href="library.html">10. Creating a Library &rarr;</a>
        </li>
    </ul>
</div>


        </div>
        
        <div class="doctree-panel col-md-3">
        <ul>
    
    <li><a href="#server-definition">Server Definition</a></li>
    
    <li><a href="#importing-libraries">Importing Libraries</a></li>
    
    <li><a href="#installing-libraries">Installing Libraries</a></li>
    
    <li><a href="#mounting-applications">Mounting Applications</a></li>
    
</ul>
        </div>
        
    </div>
</div>

    <div id="push"></div>

    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Moya is &copy; 2014 <a href="#">Moya Software Foundation</a>.</p>
      </div>
    </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.js"></script>


</body>

</html>