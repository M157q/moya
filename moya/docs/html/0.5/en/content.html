<!DOCTYPE html>
<!-- saved from url=(0065)http://twitter.github.io/bootstrap/examples/starter-template.html -->
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Content</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Le styles -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="assets/css/custom.css" rel="stylesheet">

        <style>
        
        </style>
    </head>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

  <body>
    <div id="wrap">
    <div id="main-nav" class="navbar navbar-default navbar-static-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".doc-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Moya Documentation</a>
            </div>
            <nav class="collapse navbar-collapse doc-navbar-collapse" role="navigation">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="index.html">Reference</a>
                    </li>
                    <li >
                        <a href="tags/index.html">Tags</a>
                    </li>
                    <li >
                        <a href="tutorial.html">Tutorial</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    
<div class="container">
    <div class="row">
        <div class="doc-content col-md-9">
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="urls.html">&larr; 12. URLs, Views and Middleware</a>
        </li>
        
        <li class="next">
            <a href="db.html">14. Databases &rarr;</a>
        </li>
    </ul>
</div>


            <h1>Content</h1>
            <p>We've seen how you can generate content by rendering templates in <a href="urls.html">URLs, Views and Middleware</a>. It is entirely possible to build a web application using templates alone &ndash; which is how most web frameworks work. The downside of templates is that they can become difficult to maintain as the project grows. Making a seemingly simple change tends to involve editing a number of files, and increases the chance that you will break something on some other page. Moya offers a complimentary system called <em>content</em> that makes generating HTML in a web application a less <em>brittle</em> process.</p>
<p>Consider some kind of corporate site, which is the bread and butter for many developers. Your client has asked you to put a news ticker widget on the front page, which pulls news items items from the database. You implement this by adding some parameters to the template which generates the page, and including a  template to generate the widget markup. You also add markup on the main page to pull in the CSS and Javascript that makes it work. Your client is happy for a few weeks, but comes back to request that you show a news ticker on <em>another</em> page, with news from a different source. So you modify the view for the new page to generate the appropriate parameters, and modify the other template to include the widget markup, JS, and CSS. Even if you were to factor out common elements and follow best-practices, you've still done work twice. And the problem only gets worse if your client wants yet another new ticker elsewhere.</p>
<p>This is one of issues that Moya's content system is intended to solve. With content, you can implement the news ticker with the usual web development technologies. Only now you can add a news ticker to another page with a <em>single</em> line change that automatically generates the markup and pulls in the JS and CSS needed to make it just work. Leaving you plenty of time to invoice the client and go back to playing Minecraft.</p>
<h2><a name="defining-content"></a><a href="#defining-content">Defining Content<span class="anchor"> &#182;</span></a></h2><p>A content definition is a high level description of a page which Moya will use to generate markup. Content consists of a number of independent <em>sections</em> containing nested elements.</p>
<p>Lets look at an example of a content definition. The following might be used to render an index page, which lists all available sushi products:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.product.list"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-list.html"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">for</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"products"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product.html"</span><span class="tag tagcontent">&nbsp;let:product=</span><span class="attrib tag tagcontent">"product"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/for</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>The following code will render the content:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">render-content</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.product.list"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">let</span><span class="tag tagcontent">&nbsp;products=</span><span class="attrib tag tagcontent">"['nigiri',&nbsp;tuna-roll',&nbsp;'fugu']"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/render-content</span><span class="tag">&gt;</span></div></pre><p>The code inside <a class="tag" href="tags/httpmoyaprojectcom/tag_content.html">&lt;content&gt;</a> is executable Moya code; when invoked (with <a class="tag" href="tags/httpmoyaprojectcom/tag_render-content.html">&lt;render-content&gt;</a>) Moya will execute the content line by line and build up an internal description of the page, known as a <em>content object</em>. This content object may then be rendered with a template to create the HTML that will be served.</p>
<aside>You can watch the content being create in the debugger by displaying the value of <b>.content</b></aside><p>The first tag inside the <a class="tag" href="tags/httpmoyaprojectcom/tag_content.html">&lt;content&gt;</a> tag is <a class="tag" href="tags/httpmoyaprojectcom/tag_title.html">&lt;title&gt;</a>, which sets the title to <code>"Sushi Product Page"</code>. Next there is a <a class="tag" href="tags/httpmoyaprojectcom/tag_section.html">&lt;section&gt;</a> tag which marks a block of <em>renderable</em> elements. A section defines content for a particular part of a page; such as the body, a column, footer, etc. In our example we have a single section called <code>body</code> which contains a <a class="tag" href="tags/httpmoyaprojectcom/tag_for.html">&lt;for&gt;</a> loop that calls <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> for each item in the <code>products</code> list. The <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> tag associates data with a template, so the content will contain a reference to a template for each item in <code>products</code>.</p>
<p>When the <a class="tag" href="tags/httpmoyaprojectcom/tag_content.html">&lt;content&gt;</a> tag returns, Moya now has a content object that contains information about all the elements in the page; typically references to templates and associated data. Moya can then render this data structure with the template specified in the <code>template</code> attribute of <a class="tag" href="tags/httpmoyaprojectcom/tag_content.html">&lt;content&gt;</a>.</p>
<p>Lets look at the <code>product-list.html</code> template which renders the content:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span><span class="sub">${title}</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.body&nbsp;%}</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>This template inserts the title of the content (set by the <a class="tag" href="tags/httpmoyaprojectcom/tag_title.html">&lt;title&gt;</a> tag), and renders the <code>body</code> section from the content.</p>
<p>The <a class="tag" href="tags/httpmoyaprojectcom/tag_title.html">&lt;title&gt;</a> tag is actually a shortcut, equivalent to the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">str</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"title"</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/str</span><span class="tag">&gt;</span></div></pre><p>This works because any data created in the content scope is passed to the template. Moya also passes a dictionary called <code>sections</code> to the template which contains the renderable elements defined in the sections.</p>
<p>When Moya sees <a href="templates.html#render" title="Templates">{% render sections.body %}</a> in the main template, it renders the <code>body</code> section, which contains three template nodes; one for each product. The template nodes render the following template (<code>product.html</code>):</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent templatetag">{%&nbsp;url&nbsp;'product'&nbsp;with&nbsp;product=product&nbsp;%}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span>Buy&nbsp;</span><span class="sub">${title:product}</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>The end product will be a string contain HTML, which would look something like the following:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/nigiri/"</span><span class="tag">&gt;</span>Nigiri</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/tuna-roll/"</span><span class="tag">&gt;</span>Tuna-rooll</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/fugu/"</span><span class="tag">&gt;</span>Fugu</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>In a real project, the content definition would have more sections and different types of renderable elements. But as requirements grow more complex, the code inside the <a class="tag" href="tags/httpmoyaprojectcom/tag_content.html">&lt;content&gt;</a> stays relatively manageable. Operations such as modifying template parameters, and moving markup from one content area to another are trivially simple, in contrast to a pure template approach.</p>
<div class="alert alert-warning"><strong>NOTE</strong> The HTML code shown here is aligned for sake of readability, but may not match the actual rendered code (although the end result will be the same).</div><h2><a name="rendering-content"></a><a href="#rendering-content">Rendering Content<span class="anchor"> &#182;</span></a></h2><p>The <a class="tag" href="tags/httpmoyaprojectcom/tag_render-content.html">&lt;render-content&gt;</a> tag is one way of rendering content. It renders content to a string, which you could then return from a view. Because you rarely want to do any more processing once you have a page of HTML, Moya also offers the <a class="tag" href="tags/httpmoyaprojectcom/tag_serve-content.html">&lt;serve-content&gt;</a> tag which renders and serves content in one.</p>
<p>Here's how the previous example could be written to serve the content immediately:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">serve-content</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.product.list"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">let</span><span class="tag tagcontent">&nbsp;products=</span><span class="attrib tag tagcontent">"['nigiri',&nbsp;tuna-roll',&nbsp;'fugu']"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/serve-content</span><span class="tag">&gt;</span></div></pre><p>You can also specify the content to render from the <code>content</code> attribute of the <a class="tag" href="tags/httpmoyaprojectcom/tag_view.html">&lt;view&gt;</a> tag. The following view renders content with the value for <code>products</code> created in the view scope:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.products"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.product.list"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">let</span><span class="tag tagcontent">&nbsp;products=</span><span class="attrib tag tagcontent">"['nigiri',&nbsp;tuna-roll',&nbsp;'fugu']"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><p>Serving views with content in this way follows the same logic regarding returned data as <a href="urls.html#template-views" title="URLs, Views and Middleware">template views</a>; the following is also valid:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.products"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.product.list"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">return-dict</span><span class="tag tagcontent">&nbsp;let:products=</span><span class="attrib tag tagcontent">"['nigiri',&nbsp;tuna-roll',&nbsp;'fugu']"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><h2><a name="nested-content"></a><a href="#nested-content">Nested Content<span class="anchor"> &#182;</span></a></h2><p>Content tags may contain other content tags. In fact, it is very common to have several levels of nested content in a typical page. Lets take the preceding example and demonstrate how to render nested content. We are going to move the products <em>inside</em> a template node which will wrap it with some HTML markup.</p>
<p>For sake of demonstration, we will wrap the list of products in an HTML <code>&lt;div&gt;</code> tag with a class of <code>product-container</code>. Here's the new content:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.product.list"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-list.html"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-container.html"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">for</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"products"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product.html"</span><span class="tag tagcontent">&nbsp;let:product=</span><span class="attrib tag tagcontent">"product"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/for</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/node</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>The product nodes are now rendered inside another node with a template of <code>product-container.html</code>. This template has the additional responsibility of rendering its <em>children</em> as well. Rendering children can be done with the <a href="templates.html#children" title="Templates">{% children %}</a> template tag. Here is the <code>product-container.html</code> template:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;children&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>Now, when we render the content we will get the following:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/nigiri/"</span><span class="tag">&gt;</span>Nigiri</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/tuna-roll/"</span><span class="tag">&gt;</span>Tuna-rooll</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/fugu/"</span><span class="tag">&gt;</span>Fugu</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><h3><a name="advanced-nesting"></a><a href="#advanced-nesting">Advanced Nesting<span class="anchor"> &#182;</span></a></h3><p>Occasionally it is useful to have more control over how sections are rendered. If a section is empty (or does not exist) it will evaluate to <code>False</code>. You can use this in a template to render a section only if it has content. For example, here's how we would modify <code>product-list.html</code> to only render the body section if it is non-empty:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span><span class="sub">${title}</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%-&nbsp;if&nbsp;sections.body&nbsp;%}</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.body&nbsp;%}</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%-&nbsp;endif&nbsp;%}</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>You may also iterate over the <em>children</em> in a content section and render them individually. You might want to do this if you want to wrap each child in markup. For example, lets take the <code>product-container.html</code> template and modify it so we wrap each product individually, rather than all of them:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;product-container.html&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;for&nbsp;child&nbsp;in&nbsp;self&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;child&nbsp;%}</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"></span><span class="templatetag">{%&nbsp;endfor&nbsp;%}</span></div></pre><p>The above template iterates over a value called <code>self</code> which is the current content object being rendered (in this case it is the <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> with <code>template="product-container.html"</code>). The <a href="templates.html#render" title="Templates">{% render %}</a> template tag renders each of the child nodes inside a <code>&lt;div&gt;</code>. This change would result in the following output:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/nigiri/"</span><span class="tag">&gt;</span>Nigiri</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/tuna-roll/"</span><span class="tag">&gt;</span>Tuna-rooll</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/fugu/"</span><span class="tag">&gt;</span>Fugu</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line20"></a><div class="line line-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line21"></a><div class="line line-21">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line22"></a><div class="line line-22"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><h2><a name="content-html-tags"></a><a href="#content-html-tags">Content HTML tags<span class="anchor"> &#182;</span></a></h2><p>Tags in a content definition are typically <em>high-level</em>; they specify <em>what</em> to render, and leave the <em>how</em> to a template. Occasionally though, it is useful to be able to specify the markup directly in the content. For instance, if you want to wrap content in a simple <code>&lt;div&gt;</code> and creating a another template seems overkill.</p>
<p>To insert simple HTML content you can use the <code>http://moyaproject.com/html</code> namespace. Any tag in that namespace will result in the equivalent tag in the rendered output. For example, lets take our list of sushi products and wrap them in a <code>&lt;div&gt;</code> with a class of <code>products-column</code>. Here's how we could do that:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns:html=</span><span class="attrib tag tagcontent">"http://moyaproject.com/html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.product.list"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-list.html"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">html:</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"products-column"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-container.html"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">for</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"products"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product.html"</span><span class="tag tagcontent">&nbsp;let:product=</span><span class="attrib tag tagcontent">"product"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/for</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/node</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/html:div</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>Note the addition of <code>xmlns:html="http://moyaproject.com/html"</code> to the root tag which introduces the html <a href="xml.html#namespaces" title="XML">namespace</a>, and the <code>html:</code> prefix on the <code>&lt;html:div&gt;</code> tag. When this content is rendered, it will product the following output:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"products-columm"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/nigiri/"</span><span class="tag">&gt;</span>Nigiri</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/tuna-roll/"</span><span class="tag">&gt;</span>Tuna-rooll</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product-container"</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/sushifinder/product/fugu/"</span><span class="tag">&gt;</span>Fugu</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line20"></a><div class="line line-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line21"></a><div class="line line-21">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line22"></a><div class="line line-22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line23"></a><div class="line line-23">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line24"></a><div class="line line-24"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><h2><a name="extending-content"></a><a href="#extending-content">Extending Content<span class="anchor"> &#182;</span></a></h2><p>A content definition may <em>extend</em> another, in much the same way as <a href="templates.html" title="Templates">templates</a> may be extended. When content is extended it inherits any data from the extended content, and sections with the same name are combined. The result may be rendered as normal.</p>
<p>Extending content is most often done when when there are common elements in a page and you don't want to repeat yourself. Lets write a content element for the sushi example that will display special offers on every page in the project. This content element will define a section named <code>body</code> with a single <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> that renders <code>specials.html</code>.</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.base"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag tagcontent">&nbsp;merge=</span><span class="attrib tag tagcontent">"append"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"specials.html"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>To extend from this content, we need only add an <code>extends</code> attribute which contains an <a href="moyacode.html#element-references" title="Moya Code">element reference</a> to the <code>base</code> content. Here's how we would change the <a class="tag" href="tags/httpmoyaprojectcom/tag_content.html">&lt;content&gt;</a> tag to extend the base template, above:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.product.list"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-list.html"</span><span class="tag tagcontent">&nbsp;extends=</span><span class="attrib tag tagcontent">"#content.base"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;as&nbsp;previous&nbsp;content&nbsp;example&nbsp;--&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div></pre><p>If we were to render the product list content now, the template <code>specials.html</code> will be inserted immediately prior to the three products. As will any content that extends from <code>#content.base</code>.</p>
<p>You may have noticed the <code>merge</code> attribute on the <a class="tag" href="tags/httpmoyaprojectcom/tag_section.html">&lt;section&gt;</a> in the base content. This tells Moya what do if a similarly-named section exists in both content definitions. This attribute may be set to one of the following three values:</p>
<dl class="dl-horizontal">
<dt>replace</dt>
<dd>Replaces the content from the base section entirely (the default).</dd>
<dt>append</dt>
<dd>Appends new content to the similarly-named section being extended &ndash; which generally results in the markup appearing below the base content markup.</dd>
<dt>prepend</dt>
<dd>Prepends new content to the similarly-named section being extended.</dd>
</dl><p>Content may be extended multiple times, just be careful not to extend the same content definition multiple times in a chain, which would result in an error.</p>
<p>If the <code>extends</code> attribute is <em>not</em> specified, then Moya will extend from the content specified in the <a href="project.html#site-section" title="Building a Project">base_content</a> setting in the <code>[site]</code> section of your project settings. This is a good way of customizing the look and feel on a per-site basis.</p>
<h2><a name="widgets"></a><a href="#widgets">Widgets<span class="anchor"> &#182;</span></a></h2><p>A <em>widget</em> is a form of <a href="customtags.html" title="Custom Tags">custom tag</a> which generates content. At a simple level, a widget may take the place of a <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> in that it can render a template with data. Widgets may also run executable Moya code and pull in external files such as JS and CSS. This makes widgets very self-contained, in that you can move a widget tag from one page to another and the page will render correctly without any further changes to markup, stylesheets or Javascript.</p>
<p>Let's show how we could use custom widgets in place of node tags in the sushi examples. The following code defines a widget called <code>&lt;product&gt;</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">widget</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"widgets/product.html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">signature</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">attribute</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"expression"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/signature</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/widget</span><span class="tag">&gt;</span></div></pre><p>This widget may now be used in place of the the equivalent <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a>. The <code>template</code> attribute of <a class="tag" href="tags/httpmoyaprojectcom/tag_widget.html">&lt;widget&gt;</a> defines the template to use. By convention, widget templates are placed in a subdirectory called <code>widgets</code> (within the library's template directory). The template itself is the same as the template used previously. Here it is again:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;widgets/product.html&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent templatetag">{%&nbsp;url&nbsp;'product'&nbsp;with&nbsp;product=product&nbsp;%}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span>Buy&nbsp;</span><span class="sub">${title:product}</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>And here is how you would use it in a content definition:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns:sushi=</span><span class="attrib tag tagcontent">"http://moyaproject.com/sushifinder"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.product.list"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-list.html"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushi&nbsp;Product&nbsp;Page</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product-container.html"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">for</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"products"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">sushi:</span><span class="tag tagname">product</span><span class="tag tagcontent">&nbsp;product=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/for</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/node</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>Note the addition of the <a href="xml#namespaces">namespace</a> declaration in the first tag. The namespace URL should be the value used in the library's <a href="library.html#lib-section" title="Creating a Library">lib.ini</a> file. The inner-most <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> has been replaced with the widget tag.</p>
<h3><a name="adding-css-to-a-widget"></a><a href="#adding-css-to-a-widget">Adding CSS to a widget<span class="anchor"> &#182;</span></a></h3><p>Using a widget tag here has made the content definition marginally more readable, but we haven't gained much for this example. In a real-life example though, a widget will probably have at least some CSS associated with it. Let's add some CSS to the product widget. The following will create a CSS style that draws a red border around each prouduct:</p>
<aside>Red borders are ugly, this is just for demonstration purposes.</aside><pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">widget</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"widgets/product.html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">signature</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">attribute</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"expression"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/signature</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">css</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;.content</div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="braced">{</span></div><a name="line8"></a><div class="line line-8"><span class="braced">&nbsp;&nbsp;&nbsp;&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;red;</span></div><a name="line9"></a><div class="line line-9"><span class="braced">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/css</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"></span><span class="tag">&lt;</span><span class="endtagname tag">/widget</span><span class="tag">&gt;</span></div></pre><p>When you render the content definition now, the product widget will add the CSS to the a section in the content called <code>"css"</code>. To ensure that the css is added to our page, we need to render the <code>css</code> block in the base template. Here's how we would do that:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.css&nbsp;unique&nbsp;%}</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span><span class="sub">${title}</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.body&nbsp;%}</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>Now when you render the content, the following code will be added inside the <code>&lt;head&gt;</code> markup:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">style</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"text/css"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">.content</div><a name="line3"></a><div class="line line-3">{</div><a name="line4"></a><div class="line line-4">border:&nbsp;1px&nbsp;solid&nbsp;red;</div><a name="line5"></a><div class="line line-5">}</div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="endtagname tag">/style</span><span class="tag">&gt;</span></div></pre><p>Note the addition of the keyword <code>unique</code> in the template tag which renders the <code>css</code> section. This tells Moya not to render identical content more than once. This is so that if we have ten <code>&lt;product&gt;</code> tags on a page, we only get a single copy of the style tag.</p>
<p>While it is possible to write CSS in widgets like this, it is generally preferable to link to an external stylesheet, so that you can keep your code modular. To reference an external CSS files use the <a class="tag" href="tags/httpmoyaprojectcom/tag_include-css.html">&lt;include-css&gt;</a> tag, which takes the path to a CSS file in the <code>path</code> attribute. For example, we can save the following CSS as <code>css/widgets/products.css</code> in the library's <a href="library.html#media-section" title="Creating a Library">media</a> directory:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1">/*&nbsp;css/widgets/product.css&nbsp;*/</div><a name="line2"></a><div class="line line-2">.content</div><a name="line3"></a><div class="line line-3">{</div><a name="line4"></a><div class="line line-4">border:&nbsp;1px&nbsp;solid&nbsp;red;</div><a name="line5"></a><div class="line line-5">}</div></pre><p>The widget definition would become:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">widget</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"widgets/product.html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">signature</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">attribute</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"expression"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/signature</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">include-css</span><span class="tag tagcontent">&nbsp;path=</span><span class="attrib tag tagcontent">"css/widgets/product.css"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="endtagname tag">/widget</span><span class="tag">&gt;</span></div></pre><p>The <a class="tag" href="tags/httpmoyaprojectcom/tag_include-css.html">&lt;include-css&gt;</a> tag adds a dictionary to the content called <code>include</code> which will contain a list of CSS paths called <code>css</code>. Here's how you can render the included CSS paths in the base template:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;include.css&nbsp;%}</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span><span class="sub">${title}</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.body&nbsp;%}</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>Moya won't add a CSS path to the list more than once, so the <code>unique</code> keyword is not required here.</p>
<h3><a name="adding-javascript-to-a-widget"></a><a href="#adding-javascript-to-a-widget">Adding Javascript to a Widget<span class="anchor"> &#182;</span></a></h3><p>Associating javascript with a widget is very similar to <a href="content.html#adding-css-to-a-widget" title="Content">adding CSS</a>; the <a class="tag" href="tags/httpmoyaprojectcom/tag_js.html">&lt;js&gt;</a> tag adds Javascript to the <code>js</code> section, and <a class="tag" href="tags/httpmoyaprojectcom/tag_include-js.html">&lt;include-js&gt;</a> references a JS file in the library's media directory.</p>
<p>As with CSS, it is generally better to write external Javascript files and include them with <a class="tag" href="tags/httpmoyaprojectcom/tag_include-js.html">&lt;include-js&gt;</a>. An exception would be if the main functionality is in an external file but you also want a short snippet of code to initialize an individual widget. To demonstrate one way of doing this, we will look at some code from the Moya Comments library.</p>
<p>The comments widget renders the comments HTML and also invokes some JS. The widget includes the following line:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">include-js</span><span class="tag tagcontent">&nbsp;path=</span><span class="attrib tag tagcontent">"js/comments.js"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>This ensures that a script tag will be generated in the page to load <code>comments.js</code>, which contains a <a href="http://jquery.com/">JQuery</a> plugin:</p>
<p>Also in the widget is the following code:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">let</span><span class="tag tagcontent">&nbsp;id=</span><span class="attrib tag tagcontent">".content.id"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">js</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;$(function(){</div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$('#</span><span class="sub">${id}</span>').moyaComments();</div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;});</div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="endtagname tag">/js</span><span class="tag">&gt;</span></div></pre><p>The first line sets <code>id</code> to the value of <code>.content.id</code> which is updated every time a content tag adds some content &ndash; making it an effective unique ID for the current page. The <a class="tag" href="tags/httpmoyaprojectcom/tag_js.html">&lt;js&gt;</a> tag generates a short script that invokes the JQuery plugin for the comments widget being rendered.</p>
<p>The comments template starts with the following line:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"moya-comments-container"</span><span class="tag tagcontent">&nbsp;id=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent sub">${id}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span></div></pre><p>Note the reference to <code>id</code>, which is set to the same value that was used in the <a class="tag" href="tags/httpmoyaprojectcom/tag_js.html">&lt;js&gt;</a>. This connects the JQuery widget to the markup it applies to.</p>
<h2><a name="common-sections"></a><a href="#common-sections">Common Sections<span class="anchor"> &#182;</span></a></h2><p>We've seen how adding a widget to a content definition requires that associated objects such as JS / CSS must be rendered in the base template. If we want to ensure that a widget renders equally well with different templates &ndash; even when added by third parties &ndash; we need to add a few common sections and render calls to our base templates.</p>
<p>Here's an example of a bear-bones HTML 5 base template with all common sections:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagcontent">!DOCTYPE&nbsp;html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;renders&nbsp;content&nbsp;in&nbsp;the&nbsp;"css"&nbsp;section&nbsp;--&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"css"&nbsp;%}{%&nbsp;render&nbsp;sections.css&nbsp;%}{%&nbsp;endblock&nbsp;%}</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;renders&nbsp;CSS&nbsp;paths&nbsp;added&nbsp;with&nbsp;the&nbsp;&lt;include-css&gt;&nbsp;tag&nbsp;--&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"includecss"&nbsp;%}{%&nbsp;render&nbsp;include.css&nbsp;%}{%&nbsp;endblock&nbsp;%}</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;include&nbsp;JS&nbsp;that&nbsp;must&nbsp;go&nbsp;in&nbsp;the&nbsp;head&nbsp;--&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"jshead"&nbsp;%}{%&nbsp;render&nbsp;sections.jshead&nbsp;%}{%&nbsp;endblock&nbsp;%}</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;render&nbsp;other&nbsp;head&nbsp;content&nbsp;--&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"head"&nbsp;%}{%&nbsp;render&nbsp;sections.head&nbsp;%}{%&nbsp;endblock&nbsp;%}</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;set&nbsp;the&nbsp;title&nbsp;--&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span><span class="sub">${title}</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;render&nbsp;main&nbsp;body&nbsp;section&nbsp;--&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"body"&nbsp;%}{%&nbsp;render&nbsp;sections.body&nbsp;%}</span>&nbsp;</span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div><a name="line18"></a><div class="line line-18"><br></div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;generate&nbsp;script&nbsp;tags&nbsp;to&nbsp;from&nbsp;JS&nbsp;paths&nbsp;included&nbsp;with&nbsp;&lt;include-js&gt;&nbsp;--&gt;</span></div><a name="line20"></a><div class="line line-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"includejs"&nbsp;%}{%&nbsp;render&nbsp;include.js&nbsp;%}{%&nbsp;endif&nbsp;%}</span></div><a name="line21"></a><div class="line line-21">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;render&nbsp;Javascript&nbsp;sections&nbsp;--&gt;</span></div><a name="line22"></a><div class="line line-22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"js"&nbsp;%}{%&nbsp;render&nbsp;sections.js&nbsp;unique%}{%&nbsp;endblock&nbsp;%}</span></div><a name="line23"></a><div class="line line-23">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;JS&nbsp;that&nbsp;must&nbsp;go&nbsp;at&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;page&nbsp;--&gt;</span></div><a name="line24"></a><div class="line line-24">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"jsfoot"&nbsp;%}{%&nbsp;render&nbsp;sections.jsfoot&nbsp;unique%}{%&nbsp;endblock&nbsp;%}</span></div><a name="line25"></a><div class="line line-25">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line26"></a><div class="line line-26"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>The common sections as as follows:</p>
<h3><a name="css"></a><a href="#css">"css"<span class="anchor"> &#182;</span></a></h3><p>This block renders content from the <code>"css"</code> section, such as html <code>&lt;style&gt;</code> tags added by the <a class="tag" href="tags/httpmoyaprojectcom/tag_css.html">&lt;css&gt;</a> tag. It is the head of the HTML.</p>
<h3><a name="includecss"></a><a href="#includecss">"includecss"<span class="anchor"> &#182;</span></a></h3><p>This block renders the list of CSS paths added by the <a class="tag" href="tags/httpmoyaprojectcom/tag_include-css.html">&lt;include-css&gt;</a> tag.</p>
<h3><a name="jshead"></a><a href="#jshead">"jshead"<span class="anchor"> &#182;</span></a></h3><p>This block adds Javascript code that must be in the head of the HTML document. Note, that the <a class="tag" href="tags/httpmoyaprojectcom/tag_js.html">&lt;js&gt;</a> tag adds to the <code>"js"</code> section by default. If you want to add to the <code>"jshead"</code> section, specify it with the <code>section</code> attribute. For example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">js</span><span class="tag tagcontent">&nbsp;section=</span><span class="attrib tag tagcontent">"jshead"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;alert("Ready&nbsp;for&nbsp;take-off!");</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/js</span><span class="tag">&gt;</span></div></pre><p>This would produce the following output in the <code>"jshead"</code> block:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">script</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"text/javascript"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;alert("Ready&nbsp;for&nbsp;take-off!");</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/script</span><span class="tag">&gt;</span></div></pre><p>Which would create an annoying popup when your page loads.</p>
<h3><a name="head"></a><a href="#head">"head"<span class="anchor"> &#182;</span></a></h3><p>This block should contain any other markup that should appear in the head of the HTML.</p>
<h3><a name="body"></a><a href="#body">"body"<span class="anchor"> &#182;</span></a></h3><p>This block renders the <code>body</code> section which contains the main visible content. This is often overridden to create several content areas. For example, you could use the following template to divide the body in to separate content areas:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;column-base.html&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;extends&nbsp;"base.html"&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"><br></div><a name="line4"></a><div class="line line-4"></span><span class="templatetag">{%&nbsp;block&nbsp;"body"&nbsp;%}</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"container"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"content"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.content&nbsp;%}</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"column"</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.column&nbsp;%}</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"footer"</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;sections.footer&nbsp;%}</span></div><a name="line15"></a><div class="line line-15"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16"></span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div></pre><p>Because the above template <em>extends</em> the base, it inherits the base template's blocks. It also adds three new sections that will render content. You can choose what content goes where in the content definition. Here's an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.article"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"column-base.html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"content"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">sushi:</span><span class="tag tagname">article</span><span class="tag tagcontent">&nbsp;article=</span><span class="attrib tag tagcontent">"article"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"column"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">sushi:</span><span class="tag tagname">recent-articles</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"footer"</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">text</span><span class="tag">&gt;</span>Copyright&nbsp;2014&nbsp;Sushifinder&nbsp;PLC</span><span class="tag">&lt;</span><span class="tag tagname">text</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"></span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div></pre><h3><a name="includejs"></a><a href="#includejs">"includejs"<span class="anchor"> &#182;</span></a></h3><p>This block renders the list of JS paths added by the <a class="tag" href="tags/httpmoyaprojectcom/tag_include-js.html">&lt;include-js&gt;</a> tag. It is generally best to place this block at the end of the page, because it can delay page render time if the browser has to wait for external Javascript to load before it can render the page content.</p>
<h3><a name="js"></a><a href="#js">"js"<span class="anchor"> &#182;</span></a></h3><p>This block renders JS added to the content with the <a class="tag" href="tags/httpmoyaprojectcom/tag_js.html">&lt;js&gt;</a> tag. It is generally placed at the end of the page to speed up page render times &ndash; but could equally be in the head of the page.</p>
<h3><a name="jsfoot"></a><a href="#jsfoot">"jsfoot"<span class="anchor"> &#182;</span></a></h3><p>This block renders JS that should be included at the end of the page.</p>
<aside>If you are wondering why there are three javascript sections (<code>"js"</code>, <code>"jshead"</code> and <code>"jsfoot"</code>) &ndash; it is so that the <code>"js"</code> section can go whereever the template designer decides, but you still have the option of explicitly putting the Javascript in the head or the foot of the HTML document.</aside>
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="urls.html">&larr; 12. URLs, Views and Middleware</a>
        </li>
        
        <li class="next">
            <a href="db.html">14. Databases &rarr;</a>
        </li>
    </ul>
</div>


        </div>
        
        <div class="doctree-panel col-md-3">
        <ul>
    
    <li><a href="#defining-content">Defining Content</a></li>
    
    <li><a href="#rendering-content">Rendering Content</a></li>
    
    <li><a href="#nested-content">Nested Content</a><ul>
    
    <li><a href="#advanced-nesting">Advanced Nesting</a></li>
    
</ul></li>
    
    <li><a href="#content-html-tags">Content HTML tags</a></li>
    
    <li><a href="#extending-content">Extending Content</a></li>
    
    <li><a href="#widgets">Widgets</a><ul>
    
    <li><a href="#adding-css-to-a-widget">Adding CSS to a widget</a></li>
    
    <li><a href="#adding-javascript-to-a-widget">Adding Javascript to a Widget</a></li>
    
</ul></li>
    
    <li><a href="#common-sections">Common Sections</a><ul>
    
    <li><a href="#css">&quot;css&quot;</a></li>
    
    <li><a href="#includecss">&quot;includecss&quot;</a></li>
    
    <li><a href="#jshead">&quot;jshead&quot;</a></li>
    
    <li><a href="#head">&quot;head&quot;</a></li>
    
    <li><a href="#body">&quot;body&quot;</a></li>
    
    <li><a href="#includejs">&quot;includejs&quot;</a></li>
    
    <li><a href="#js">&quot;js&quot;</a></li>
    
    <li><a href="#jsfoot">&quot;jsfoot&quot;</a></li>
    
</ul></li>
    
</ul>
        </div>
        
    </div>
</div>

    <div id="push"></div>

    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Moya is &copy; 2014 <a href="#">Moya Software Foundation</a>.</p>
      </div>
    </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.js"></script>


</body>

</html>