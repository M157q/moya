<!DOCTYPE html>
<!-- saved from url=(0065)http://twitter.github.io/bootstrap/examples/starter-template.html -->
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Moya Forms</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Le styles -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="assets/css/custom.css" rel="stylesheet">

        <style>
        
        </style>
    </head>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

  <body>
    <div id="wrap">
    <div id="main-nav" class="navbar navbar-default navbar-static-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".doc-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Moya Documentation</a>
            </div>
            <nav class="collapse navbar-collapse doc-navbar-collapse" role="navigation">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="index.html">Reference</a>
                    </li>
                    <li >
                        <a href="tags/index.html">Tags</a>
                    </li>
                    <li >
                        <a href="tutorial.html">Tutorial</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    
<div class="container">
    <div class="row">
        <div class="doc-content col-md-9">
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="feedback.html">&larr; 10. Moya Feedback</a>
        </li>
        
        <li class="next">
            <a href="jsonrpc.html">12. Moya JSON-RPC &rarr;</a>
        </li>
    </ul>
</div>


            <h1>Moya Forms</h1>
            <p>Forms are an essential part of any web application, as they are the primary way in which a user will interact with your site. Poorly implemented forms can have a significant negative impact on the user experience. Enough to put a user off using your site at all &ndash; so it is important to do forms well.</p>
<p>It is possible to build forms <em>from scratch</em> with Moya, but the Moya Forms library will accelerate designing, rendering, and processing of forms &ndash; without restricting customization.</p>
<h2><a name="installation"></a><a href="#installation">Installation<span class="anchor"> &#182;</span></a></h2><p>The Moya Forms library is built in to Moya and may be imported via its Python path as follows:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.forms"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>The above line should be in your <a class="tag" href="tags/httpmoyaprojectcom/tag_server.html">&lt;server&gt;</a> declaration.</p>
<p>You can install the library with the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"forms"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.forms"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>Note that the library isn't <em>mounted</em> anywhere, because no views are required to use forms. Installing the library makes a number of custom tags available (which we will cover here).</p>
<aside>If you created your project with <b>moya start project</b>, the forms library will have been pre-installed.</aside><h3><a name="test-forms"></a><a href="#test-forms">Test Forms<span class="anchor"> &#182;</span></a></h3><p>The forms library comes with a test view which show the various form controls you can use. These are not intended for production, but if you are interested, you can mount them by adding the following to your <code>server.xml</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">mount</span><span class="tag tagcontent">&nbsp;app=</span><span class="attrib tag tagcontent">"forms"</span><span class="tag tagcontent">&nbsp;url=</span><span class="attrib tag tagcontent">"/forms/"</span><span class="tag tagcontent">&nbsp;mountpoint=</span><span class="attrib tag tagcontent">"tests"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>You can now visit <a href="http://127.0.0.1:8000/forms/tests/">http://127.0.0.1:8000/forms/tests/</a> to have a look at the test forms.</p>
<h3><a name="form-namespace"></a><a href="#form-namespace">Form Namespace<span class="anchor"> &#182;</span></a></h3><p>Forms tags use the XML <a href="xml.html#namespaces" title="XML">namespace</a> <code>http://moyaproject.com/forms</code>.</p>
<p>You will probably find it easiest to add <code>xmlns="http://moyaproject.com/forms"</code> to your <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> declarations, so that you won't need a prefix for every field. For form tags <em>not</em> inside a <code>forms</code> tag, you can add <code>xmlns:forms="http://moyaprojects.com/forms"</code> to the top level <a class="tag" href="tags/httpmoyaprojectcom/tag_moya.html">&lt;moya&gt;</a> tag, to enable the <code>forms</code> namespace prefix.</p>
<h2><a name="designing-forms"></a><a href="#designing-forms">Designing Forms<span class="anchor"> &#182;</span></a></h2><p>The <code>form</code> tag begins a <em>form definition</em>. This is where you tell the Moya Forms library what fields should be in your form, how to display the form, and also how to validate the input. Let's have a look at a simple login form:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.login"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"Please&nbsp;login"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"username"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Username"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">password</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"password"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Password"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Login"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>This form has the libname <code>"form.login"</code>, which will be required when we come to process / render the form. The prefix of <code>"form."</code> is a convention which helps to keep forms distinct from other elements. The optional <code>legend</code> attribute is a human readable text displayed as a header in the form.</p>
<p>The tags inside the <code>form</code> define the contents of the form. The form above has an input box for a username, a password input for the password, and a button to submit the form; but any combination of the supported <a href="forms.html#field-tags" title="Moya Forms">fields and controls</a> possible. The attributes of field tags are used to customize the field and how it is validated. In the input and password fields there is a <code>maxlength</code> attribute which restricts the number of characters the user may type, and a boolean attribute called <code>required</code> which can tell Moya that the user must enter <em>something</em> in order to submit the form.</p>
<p>There are a number of other field tags to create the common fields expected in web forms. See <a href="forms.html#field-tags" title="Moya Forms">Field Tags</a> for details.</p>
<h3><a name="extending"></a><a href="#extending">Extending<span class="anchor"> &#182;</span></a></h3><p>Forms may be <em>extended</em> so that they inherit the fields from another form. You might want to do this if you have two forms that differ only by the text on the submit button (for example): Here's an example of a defining two forms extending from a common base:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.post.base"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"title"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Title"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">text</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"><br></div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.post.new"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"New&nbsp;Post"</span><span class="tag tagcontent">&nbsp;extends=</span><span class="attrib tag tagcontent">"#form.post.base"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Create"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9"><br></div><a name="line10"></a><div class="line line-10"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.post.edit"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"Edit&nbsp;Post"</span><span class="tag tagcontent">&nbsp;extends=</span><span class="attrib tag tagcontent">"#form.post.base"</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Edit"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>The first form with libname <code>"form.post.base"</code> isn't used directly. The following two forms both extend the base form and inherit the <code>title</code> and <code>text</code> fields. The forms doing the extending need only add the fields that are not in the base. In this case, they add an appropriate submit button.</p>
<h2><a name="working-with-forms"></a><a href="#working-with-forms">Working with Forms<span class="anchor"> &#182;</span></a></h2><p>The first step in working with a form, wether it's to process a POST request or to render the form HTML, is to get a <em>form object</em> for your <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a>. You do this with <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a> which takes the libname of the form in the <code>form</code> attribute. Here is an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.login"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"login_form"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>The value <code>login_form</code> now contains a <a href="forms.html#form-object-reference" title="Moya Forms">form object</a>. It is this form object you work with when you come to process or render the form.</p>
 
<h3><a name="form-parameters"></a><a href="#form-parameters">Form Parameters<span class="anchor"> &#182;</span></a></h3><p>It is important to note that the call to <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a> invokes the code inside the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> much like a macro &ndash; you may even put breakpoints inside a form and step through each field tag a line at a time. You can also pass parameters to the form in order to customize it. For example, an alternative to extending a base form in order to customize the submit button text might be to supply the button text as a parameter. The following code sets the submit button text to the value of a variable called <code>button_text</code>.</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.login"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"Please&nbsp;login"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"username"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Username"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">password</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"password"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Password"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent sub">$</span><span class="braced attrib tag tagcontent sub">{button_text}</span><span class="attrib tag tagcontent">"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>Here's how you would supply the button text when you get the form object:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.login"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;let:button_text=</span><span class="attrib tag tagcontent">"'Much&nbsp;Login'"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>Form parameters may be used for more advanced customization, as well as to change text. The following creates a form with a definable number of address fields:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.address"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"Enter&nbsp;your&nbsp;address"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">moya:</span><span class="tag tagname">for</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"1...(lines)"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"line_no"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"address</span><span class="attrib tag tagcontent sub">$</span><span class="braced attrib tag tagcontent sub">{line_no}</span><span class="attrib tag tagcontent">"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"50"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/moya:for</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Submit"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><aside>Note the use of the <b>moya:</b> prefix on the for tag above. This is because we are in the forms namespace and the <a class="tag" href="tags/httpmoyaprojectcom/tag_for.html">&lt;for&gt;</a> tag is defined in the default namespace. For this to work, you need to add <b>xmlns:moya="http://moyaproject.com"</b> to the top level tag.</aside><p>This form requires that the form parameter <code>lines</code> has been passed to it. The <a class="tag" href="tags/httpmoyaprojectcom/tag_for.html">&lt;for&gt;</a> tag repeats the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_input.html">&lt;input&gt;</a> the given number of times, adjusting the <code>name</code> attribute each time to create fields called <code>address1</code>, <code>address2</code> etc.</p>
<p>For example, the following retrieves a form object with <em>4</em> address fields:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.address"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;let:lines=</span><span class="attrib tag tagcontent">"4"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><aside>Extending and form parameters may be used together.</aside><h2><a name="rendering-forms"></a><a href="#rendering-forms">Rendering Forms<span class="anchor"> &#182;</span></a></h2><p>Form objects are <em>renderable</em> (Moya knows how to turn them in to HTML). You can render a form object with the <a class="tag" href="tags/httpmoyaprojectcom/tag_render.html">&lt;render&gt;</a> tag in a <a class="tag" href="tags/httpmoyaprojectcom/tag_content.html">&lt;content&gt;</a> definition, or by using the <code>{% render %}</code> template tag.</p>
<p>The following is an example of rendering a form in content:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.login"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.login"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"form.login"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"login_form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"><br></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.login"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"login.html"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Log&nbsp;In</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">render</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"login_form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10"></span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div></pre><p>Rendering a form object in a template is similar:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.login"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"login.html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"form.login"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"login_form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;login.html&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;id=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">h1</span><span class="tag">&gt;</span>Please&nbsp;fill&nbsp;in&nbsp;the&nbsp;following&nbsp;form</span><span class="tag">&lt;</span><span class="endtagname tag">/h1</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;render&nbsp;login_form&nbsp;%}</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>Rendering forms in this way generates HTML from templates in the Moya Forms library. A number of different styles are supported, from a list of fields in a table to Bootstrap style forms. This is often all you'll need and makes generating the markup effortless, but you may also customize the HTML generation on a number of levels, or render the HTML form manually and use Moya Forms for processing only.</p>
 
<h3><a name="form-styles"></a><a href="#form-styles">Form Styles<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> tag has an attribute, <code>style</code>, which can be used to select one of number of styles for the the form markup. The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a> tag also has a <code>style</code> attribute which will override the <code>style</code> on the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> tag.</p>
<aside>Some of the styles assume <a href="http://getbootstrap.com">twitter bootstrap</a> markup. Using Bootstrap will help you display nice looking forms with minimal effort, but you aren't required to use Bootstrap if you want to provide your own stylesheets.</aside><p>The following is a list of the builtin styles:</p>
<dl class="dl-horizontal"><dt>basic</dt>
<dd>
The <code>basic</code> style renders the form with basic <a href="http://getbootstrap.com/css/#forms">bootstrap markup</a>.
</dd><dt>horizontal</dt>
<dd>
The <code>horizontal</code> style renders the form with a <a href="http://getbootstrap.com/css/#forms-horizontal">bootstrap horizontal</a> layout.
</dd><dt>inline</dt>
<dd>
The <code>inline</code> style renders the form with a <a href="http://getbootstrap.com/css/#forms-inline">bootstrap inline</a> layout.
</dd><dt>paragraphs</dt>
<dd>
The <code>paragraphs</code> style renders the form with a controls in <code>&lt;p&gt;</code> tags.
</dd><dt>simple</dt>
<dd>
The <code>simple</code> style renders the form as a sequence of labels and controls.
</dd><dt>table</dt>
<dd>
The <code>table</code> style renders the form as a table with two columns; the first column contains the label and the second column contains the control.
</dd></dl><h3><a name="form-templates"></a><a href="#form-templates">Form Templates<span class="anchor"> &#182;</span></a></h3><p>Moya uses templates to render forms and controls. These may be customized by overriding the templates in the usual way.</p>
<p>When Moya renders the form, it generates a path from <code>/moya.forms/styles/{style}/form.html</code>, where <code>{style}</code> is the style specified on the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> or <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a>. For example, if the style was <code>basic</code>, Moya would render the form <code>/moya.forms/styles/basic/form.html</code>.</p>
<p>The form template is passed the form object (simply called <code>form</code>), which it uses to render the HTML markup. The form template will loop through the fields in the form and render them. Template paths for fields are generated from <code>/moya.forms/styles/{style}/fields/{fieldname}.html</code>, where <code>{style}</code> is the form style, and <code>{fieldname}</code> is the name of the field. Field templates may also be overriden if you want to customize how a field is rendered.</p>
<p>You can see the default templates used by the forms library with the following command:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;fs&nbsp;templates&nbsp;--tree&nbsp;/moya.forms/</div></pre><p>If you override any of the templates, it will change how forms or fields are rendered across your entire application. You may also customize a form or field template individually, with the <code>template</code> attribute (on the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> or <a href="forms.html#field-reference" title="Moya Forms">field tags</a>) which takes a path to your custom template.</p>
<h3><a name="custom-styles"></a><a href="#custom-styles">Custom Styles<span class="anchor"> &#182;</span></a></h3><p>You are not limited to the builtin form styles. If you want to define a new style entirely, you can add the template(s) under the path <code>/moya.forms/styles/{style}</code> (in templates fs) where <code>{style}</code> is the name of your custom style. You can now set that style on your forms to use your custom templates.</p>
<p>See any of the existing form templates as a guide how to render a custom form style. You display any of the builtin form templates with the <code>moya fs</code> command. Here's an example:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;fs&nbsp;templates&nbsp;--cat&nbsp;/moya.forms/styles/basic/form.html</div></pre><h3><a name="manual-rendering"></a><a href="#manual-rendering">Manual Rendering<span class="anchor"> &#182;</span></a></h3><p>An alternative to using the built-in form templates is to set a custom template on the form object that does all the rendering. You may lose the ability to add and remove fields easily to the HTML, but form processing and validation remains the same.</p>
<p>To set a custom template, you may either set a <code>template</code> attribute on the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> object, or override it in the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a> tag. Then when Moya renders the form object, it will render the custom template with the form object (passed to the template as <code>form</code>).</p>
<p>Here's an example of setting a custom template on a form object:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"form.login"</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"custom_login_form.html"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>You can then render the form object in a template:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;custom_login_form.html&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;action=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent sub">$</span><span class="braced attrib tag tagcontent sub">{form.action}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"username"</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent sub">$</span><span class="braced attrib tag tagcontent sub">{form.fields.username.value}</span><span class="attrib tag tagcontent">"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;render&nbsp;other&nbsp;fields...&nbsp;--&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>The custom emplate has access to all the parameters of the <a href="forms.html#form-object-reference" title="Moya Forms">form object</a>, which you can use to insert information defined in your <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a>.</p>
<h3><a name="form-content"></a><a href="#form-content">Form Content<span class="anchor"> &#182;</span></a></h3><p>Moya forms are actually a specialized form of <a href="content.html" title="Content">content</a>; when you add a field to a form you are also adding associated content information. Because of this, non-form related content tags will also work inside a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a>. You can use this to insert additional widgets, text, and images, for example. Content tags may also contain form field tags, which will be rendered normally, without breaking form functionality.</p>
<p>For example, let's say we want to wrap the username and password fields from the login form in a HTML div with an additional style. We can put the two fields inside a <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> which references a template:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.login"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"Please&nbsp;login"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">moya:</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"highlight.html"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"username"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Username"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">password</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"password"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Password"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/moya:node</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Login"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><aside>Note the use of the <b>moya:</b> prefix on the node tag. This is because the node tag is not in the forms namespace.</aside><p>When the above form is rendered in the usual way, it will render <code>highlight.html</code> within the form markup. Here's that template:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"highlight"</span><span class="tag">&gt;</span><span class="templatetag">{%&nbsp;children&nbsp;%}</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>Note the use of the <code>{% children %}</code> template tag which ensures that content and fields inside the <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> are also rendered.</p>
<h3><a name="custom-fields"></a><a href="#custom-fields">Custom Fields<span class="anchor"> &#182;</span></a></h3><p>Moya includes a standard array of form inputs (see <a href="forms.html#field-reference" title="Moya Forms">Field Reference</a>), but there may be situations where you want to create entirely custom field tags, either to change the look and feel or to provide functionality that plain old HTML doesn't support. In these situations you can use the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_field.html">&lt;field&gt;</a> tag which registers the field with the form system (to enable validation etc.), but doesn't add any content of it's own. You can tell Moya how to render the field by adding the appropriate content tag(s) inside the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_field.html">&lt;field&gt;</a>.</p>
<p>For instance, Moya comes with a builtin library to embed a rich text editor (supporting bold / italic / links etc), which may be used in place of text area fields (see <a href="forms.html#text-area" title="Moya Forms">text-area</a>). To use it, add the following lines to your <a class="tag" href="tags/httpmoyaprojectcom/tag_server.html">&lt;server&gt;</a>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.wysihtml5"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"wysihtml5"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.wysihtml5"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><aside>You won't need this step if you created the project with <b>moya start project</b>.</aside><p>Then add the XML namespace declaration <code>xmlns:wysihtml5="http://moyaproject.com/wysihtml5"</code> to the file containing your form. Now you can replace <a class="tag" href="tags/httpmoyaprojectcomforms/tag_text-area.html">&lt;text-area&gt;</a> tags with the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">field</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"content"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Rich&nbsp;Content"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">wysihtml5:</span><span class="tag tagname">editor</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/field</span><span class="tag">&gt;</span></div></pre><p>When the form is rendered it will display the rich editor containing markup from the form data (in <code>form.content</code>). The user may edit the HTML without ever seeing markup.</p>
<p>This works because when the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_field.html">&lt;field&gt;</a> tag is rendered it inserts a value called <code>field</code> in to the context. The <code>field</code> value which contains information about the field &ndash; such as <code>field.name</code>. The editor widget imports the CSS and JS required to make the editor work, and writes HTML in to an input when the form is submitted. The field may <a href="forms.html#field-validation" title="Moya Forms">validated</a> as if it were one of the standard fields.</p>
<h2><a name="processing-forms"></a><a href="#processing-forms">Processing Forms<span class="anchor"> &#182;</span></a></h2><p>When you get a form object during a POST request, Moya will fill in the field information from the POST data. A form that has been filled in (or <em>bound</em>) can then be <em>validated</em>.</p>
<p>Validating a form runs any checks on the fields, and generates error messages for fields that fail a check. The error messages are displayed when the form object is rendered, along with styles to highlight errors.</p>
<p>To validate a form, use the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate.html">&lt;validate&gt;</a> tag, which accepts a single attribute, <code>src</code>, which should be your form object. If the form validates successfully, Moya will execute the code within the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate.html">&lt;validate&gt;</a> tag. The following code demonstrates how you might handle a login form:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.login"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.login"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.login"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">validate</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">auth:</span><span class="tag tagname">login</span><span class="tag tagcontent">&nbsp;username=</span><span class="attrib tag tagcontent">"form.data.username"</span><span class="tag tagcontent">&nbsp;password=</span><span class="attrib tag tagcontent">"form.data.password"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">redirect-to</span><span class="tag tagcontent">&nbsp;url=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/forms</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><p>When a form validates successfully it will have the value <code>ok</code> set to <code>True</code>. A valid form will also contain a dictionary of the data in the <code>data</code> attribute. We can see that the view above retrieves the username and password from the form with <code>form.data.username</code> and <code>form.data.password</code>.</p>
<p>If the form doesn't validate (i.e. contains errors) then the form object may be passed to the content and rendered normally. Error messages will be displayed next to the appropriate fields.</p>
<h3><a name="populating-forms"></a><a href="#populating-forms">Populating Forms<span class="anchor"> &#182;</span></a></h3><p>You can pre-populate a form with values by setting the <code>src</code> attribute of <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a>, which should refer to an object containing attributes with the same names as the form fields (such as a database object). The following code shows how we could prepopulate the login form with an existing username:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.login"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"</span><span class="braced attrib tag tagcontent">{'username':&nbsp;'john'}</span><span class="attrib tag tagcontent">"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>When this form is rendered, the text of the username field will be populated with the value <code>'john'</code>.</p>
<p>By default <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a> will pre-populate values based on the <code>name</code> attribute of the field. If you want to prepopulate a differently named value from the src object, you can set an alternative name in the field's <code>src</code> attribute.</p>
<p>For example, here is an alternative login form. Note the <code>src</code> attribute on the first field:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.login"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"Please&nbsp;login"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"username"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"alt_name"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Username"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">password</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"password"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Password"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent sub">$</span><span class="braced attrib tag tagcontent sub">{button_text}</span><span class="attrib tag tagcontent">"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>With the above form, the username field can be prepopulated with a value called <code>alt_name</code>: </p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.login"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"</span><span class="braced attrib tag tagcontent">{'alt_name':&nbsp;'john'}</span><span class="attrib tag tagcontent">"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>You can also tell moya to not prepopulate a field by setting the fields <code>src</code> attribute to an empty string. For an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">password</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"password"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">""</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Password"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>This will prevent the password field from being pre-populated, even if value exists for <code>password</code>.</p>
<p>Note that if a form is rendered after a POST request, it will be populated with data from the request, which will likely be the result of the user having filled in the form. Data from the POST will take precedence over data from the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_get.html">&lt;get&gt;</a> tag.</p>
<h3><a name="processing-fields"></a><a href="#processing-fields">Processing Fields<span class="anchor"> &#182;</span></a></h3><p>Values set on the form with the <code>src</code> attribute are converted to text when the template is rendered. Moya will do this automatically, but you may define a custom text representation of a src value by supplying a <code>process</code> attribute on its field. This attribute should be an expression which takes the value from the <code>src</code> (simply called <code>value</code>) and returns a string. For instance, the default behavior would be equivalent to setting <code>process="str:value"</code> on every field.</p>
<p>One use for processing fields, is to define what happens when a value in the <code>src</code> object is <code>None</code>, which may occur on a database object with a null field. The default behavior would be to convert the value <code>None</code> to the string <code>'None'</code>, which is unlikely to be what you want in a form.</p>
<p>For instance, lets say we have a field <code>count</code> in a database object which could be None, and we would like to show this as <code>0</code> in a form. We could define a <code>process</code> attribute on the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_input.html">&lt;input&gt;</a> as follows:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"number"</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"count"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"count"</span><span class="tag tagcontent">&nbsp;process=</span><span class="attrib tag tagcontent">"isnone:value&nbsp;?&nbsp;'0'&nbsp;:&nbsp;str:value"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>Now when you render the form a value of <code>None</code> for <code>Count</code> will be converted to the text <code>0</code>.</p>
<h3><a name="field-validation"></a><a href="#field-validation">Field Validation<span class="anchor"> &#182;</span></a></h3><p>Most forms will require some kind of validation of the user's input, beyond marking a field as required. This is done with the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a> tag which should be inside the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_form.html">&lt;form&gt;</a> definition.</p>
<p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a> tag takes a single attribute, <code>field</code>, which should be the name of the field you want to validate. When the form is validated (with <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate.html">&lt;validate&gt;</a>), Moya calls the code inside any <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a> tags, which may report validation errors with <a class="tag" href="tags/httpmoyaprojectcomforms/tag_fail.html">&lt;fail&gt;</a>. Here's an example which validates an email field:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;inside&nbsp;a&nbsp;form&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag xmlns">form:</span><span class="tag tagname">validate-field</span><span class="tag tagcontent">&nbsp;field=</span><span class="attrib tag tagcontent">"email"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">fail</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"'@'&nbsp;not&nbsp;in&nbsp;value"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Doesn't&nbsp;appear&nbsp;to&nbsp;be&nbsp;an&nbsp;email</div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/fail</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="endtagname tag">/form:validate-field</span><span class="tag">&gt;</span></div></pre><p>When the form containing the above code is validated, Moya invokes the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a> tag with a parameter, <code>value</code>, which contains the text entered by the user. If there is no <b>@</b> symbol in the email field, then the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_fail.html">&lt;fail&gt;</a> tag will cause the validation to fail and set an error message on the field. The form will only validate if all <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a> run without any fails.</p>
<aside>For more precise validation of email addresses, you could use <a href="expressions.html#regular-expressions" title="Expressions">regular expressions</a> or the <a href="expressions.html#isemail" title="Expressions">isemail:</a> modifier.</aside><p>It is possible for field validation to refer to more than a single field. For example, in a user sign-up form it's common to have two email fields in order to confirm the user has entered their email correctly (if the fields don't match, the user must have made a typo). In these situations, you can refer to the other fields with the <code>values</code> dictionary, which is also passed to <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a>. Here's an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">validate-field</span><span class="tag tagcontent">&nbsp;field=</span><span class="attrib tag tagcontent">"email2"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">fail</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"values.email&nbsp;!=&nbsp;value"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email&nbsp;fields&nbsp;do&nbsp;not&nbsp;match</div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/fail</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/validate-field</span><span class="tag">&gt;</span></div></pre><p>The above code assumes there are two email fields, called <code>email</code> and <code>email2</code>. The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a> tag applies to the second email field, and checks that its value (stored in <code>value</code>) matches what the user entered in the first email input (stored in <code>values.email</code>). Note that the expression <code>values.email != values.email2</code> would work equally well.</p>
<h3><a name="setting-errors"></a><a href="#setting-errors">Setting Errors<span class="anchor"> &#182;</span></a></h3><p>You may set error information on the form outside of the usual validate process with the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_error.html">&lt;error&gt;</a> tag, which takes the form as input, and uses the enclosed text as the error message. The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_error.html">&lt;error&gt;</a> can set an error message that applies to the form (typically displayed above the controls) <em>or</em> error messages that apply to a particular field, with the <code>field</code> attribute. For example, the following code would set error text for a login form:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">error</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;Much&nbsp;login&nbsp;fail</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/forms:error</span><span class="tag">&gt;</span></div></pre><p>The following sets an error message that applies to the <code>username</code> field:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">error</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;field=</span><span class="attrib tag tagcontent">"username"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;such&nbsp;user!</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/forms:error</span><span class="tag">&gt;</span></div></pre><h3><a name="adapting-form-data"></a><a href="#adapting-form-data">Adapting Form Data<span class="anchor"> &#182;</span></a></h3><p>The data in a successfully validated form object is stored as text, which may not be convenient if we need it in a different format. We can tell Moya to further process (or <em>adapt</em> successfully validated data with the <code>adapt</code> attribute on field tags, which should be an expression which takes the field value (as <code>value</code>) and returns the adapted value.</p>
<aside>Adapting is the logical reverse of processing the field data. See <a href="forms.html#processing-fields" title="Moya Forms">Processing Fields</a>.</aside><p>For example, if we have an input that accepts a number, we may want to convert the value in the form data to an integer (rather than leave it as a string). Here's an example that adapts a field called <code>count</code> by converting it to an integer.</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"number"</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"count"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"count"</span><span class="tag tagcontent">&nbsp;adapt=</span><span class="attrib tag tagcontent">"int:value"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>You can also adapt form data with the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_adapt-field.html">&lt;adapt-field&gt;</a> tag &ndash; if you need to do more work than can fit in to a simple expression. When Moya processes the <code>adapt</code> attributes it also invokes any code inside <a class="tag" href="tags/httpmoyaprojectcomforms/tag_adapt-field.html">&lt;adapt-field&gt;</a>, and will replace the field data with the return value. As with the <code>adapt</code> attribute, the field being adapted is available as <code>value</code>. Additionally, the code in <a class="tag" href="tags/httpmoyaprojectcomforms/tag_adapt-field.html">&lt;adapt-field&gt;</a> is also passed a dictionary called <code>values</code> (plural) which contains all the data from the form.</p>
<p>Here's an example form containing a field called <code>title</code> and a field called <code>slug</code>. The field adapter in the form automatically generates the slug field from the title if it is left blank:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.post"</span><span class="tag tagcontent">&nbsp;legend=</span><span class="attrib tag tagcontent">"New&nbsp;Post"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"input-xxlarge"</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"title"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Post&nbsp;Title"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"60"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"input-xxlarge"</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"slug"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Slug"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"60"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"no"</span><span class="tag tagcontent"></span></div><a name="line4"></a><div class="line line-4"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inlinehelp=</span><span class="attrib tag tagcontent">"Leave&nbsp;blank&nbsp;to&nbsp;auto-generate&nbsp;a&nbsp;slug"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">adapt-field</span><span class="tag tagcontent">&nbsp;field=</span><span class="attrib tag tagcontent">"slug"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">moya:</span><span class="tag tagname">return</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"slug:values.title"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"not&nbsp;value"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/adapt-field</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><aside>A <em>slug</em> is human readable text that may be included in a URL.</aside><h3><a name="applying-forms"></a><a href="#applying-forms">Applying forms<span class="anchor"> &#182;</span></a></h3><p>A common use-case for forms is to create or edit database objects, where the names of the fields map to an attribute on a model. For example, lets say we have a Post model that contains the fields, <code>title</code>, <code>slug</code> and <code>text</code>. We could design the following form to edit a single Post object:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.post.edit"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"title"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"slug"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">text</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>The following code demonstrates how we might copy data from a successfully validated form to a model object:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;assumes&nbsp;we&nbsp;have&nbsp;retrieved&nbsp;a&nbsp;'post'&nbsp;object&nbsp;from&nbsp;the&nbsp;database&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">let</span><span class="tag tagcontent">&nbsp;post.title=</span><span class="attrib tag tagcontent">"form.data.title"</span><span class="tag tagcontent"></span></div><a name="line3"></a><div class="line line-3"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post.slug=</span><span class="attrib tag tagcontent">"form.data.slug"</span><span class="tag tagcontent"></span></div><a name="line4"></a><div class="line line-4"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;post.text=</span><span class="attrib tag tagcontent">"form.data.text"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>The above code is a perfectly valid way of processing a form, but it can get unwieldy if the form has a large number of fields. There may also be a lot of repetition if we have several views to edit different aspects of the model.</p>
<p>To simplify this kind of form, we can add a <code>dst</code> attribute to field elements, which tells Moya how to <em>apply</em> the form. The <code>dst</code> attribute should be the name of an attribute on the object which will receive the form data. Here's how we would modify the post form to enable this feature:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.post.edit"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"title"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"title"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">input</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"slug"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"30"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"slug"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">text</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"text"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>With the addition of the <code>dst</code> attributes, we can now <em>apply</em> the form as follows:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">apply</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"post"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><aside>If you don't specify <b>dst</b> on field, Moya will used the <b>src</b> attribute (since forms are often applied to the same type of object that they were populated from).</aside><h2><a name="csrf-protection"></a><a href="#csrf-protection">CSRF Protection<span class="anchor"> &#182;</span></a></h2><p>Cross Site Request Forgery (<a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">CSRF</a>) is a type of exploit where a form is submitted on behalf of a logged in user, without their knowledge. This is typically done by luring a user to a webpage and tricking them in to clicking on something that sends a pre-defined request to your web-application. It can also be done in some cases without even requiring the user to click on something.</p>
<p>An attacker can use this exploit to do things such as submitting SPAM comments, or potentially gaining access to their account entirely.</p>
<p>Moya protects against the kind of exploit by adding a hidden field to forms. This field contains a special token which is generated when the form when it is first rendered. Moya can use this token to detect if the form wasn't generated by your web application.</p>
<p>The good news is that Moya does this automatically, and if you are using the forms system to generate your forms, you won't have to worry about it.</p>
<h3><a name="how-it-work"></a><a href="#how-it-work">How it Work<span class="anchor"> &#182;</span></a></h3><p>To generate the CSRF token, Moya needs three pieces of information; the user's session id, the name of the form, and a 'secret' key which is unique to the project. The secret key is taken from the setting called 'secret' in the [project] section of your settings, and should be a long string of random digits. If you used <code>moya start project</code> to create your project, this will have been done for you.</p>
<p>When you render a form, Moya inserts a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_hidden-input.html">&lt;hidden-input&gt;</a> with a name of <code>_moya_csrf</code> containing then token. When you validate the form with <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate.html">&lt;validate&gt;</a>, Moya checks this token. If it passes, the form is processed as normal (the csrf field is removed). If the token <em>doesn't</em> match, Moya will return a forbidden response, which will typically redirect the user to the login page.</p>
<h3><a name="disabling-csrf"></a><a href="#disabling-csrf">Disabling CSRF<span class="anchor"> &#182;</span></a></h3><p>If you have a form that doesn't change the state for a logged in user, then you can disable the CSRF check by setting <code>csrf="no"</code> on the form. You can also disable the CSRF check when the form is validated with the <code>csrf</code> attribute on the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate.html">&lt;validate&gt;</a> tag.</p>
<h3><a name="manual-csrf-check"></a><a href="#manual-csrf-check">Manual CSRF check<span class="anchor"> &#182;</span></a></h3><p>You can also check the CSRF token without validating the form. The attribute <code>csrf_check</code> on a form object will be set to <code>True</code> if the form orignated from your web site or <code>False</code> if it did not. When there is no user logged in, this value is set to <code>True</code>.</p>
 
<h2><a name="form-object-reference"></a><a href="#form-object-reference">Form Object Reference<span class="anchor"> &#182;</span></a></h2><p>Form objects contain a number of parameters which you can access in Moya Code, or in a template.</p>
<h3><a name="form-object"></a><a href="#form-object">Form Object<span class="anchor"> &#182;</span></a></h3><p>Form objects contain the following fields:</p>
<dl class="dl-horizontal"><dt>bound</dt>
<dd>
    A boolean that indicates if the form is <em>bound</em> (has POST data)
</dd><dt>data</dt>
<dd>
    A dictionary of field data when a form was successfully *validated*
</dd><dt>error</dt>
<dd>
    A string contain error text associated with the form
</dd><dt>errors</dt>
<dd>
    A dictionary that maps field names on to a list of errors associated with the field
</dd><dt>fail</dt>
<dd>
    A boolean that is True if there are any errors
</dd><dt>fields</dt>
<dd>
    A list of form fields
</dd><dt>id</dt>
<dd>
    A short string containing a unique indentfier
</dd><dt>legend</dt>
<dd>
    Text containing the form <em>legend</em> (describes the purpose of the form)
</dd><dt>ok</dt>
<dd>
    A boolean that is True if the form was validated and there are no errors
</dd><dt>style</dt>
<dd>
    The form style
</dd></dl><h3><a name="field-objects"></a><a href="#field-objects">Field Objects<span class="anchor"> &#182;</span></a></h3><p>The <code>fields</code> attribute contains a list of field objects. Field objects have the following parameters:</p>
<dl class="dl-horizontal"><dt>errors</dt>
<dd>
    A list of errors associated with the field, if any
</dd><dt>help</dt>
<dd>
    Helo text associated with the field
</dd><dt>inlinehelp</dt>
<dd>
    A short help message associated with the field
</dd><dt>name</dt>
<dd>
    The name of the field (from the <code>name</code> attribute of a field tag such as <a class="tag" href="tags/httpmoyaprojectcomforms/tag_input.html">&lt;input&gt;</a>)
</dd><dt>label</dt>
<dd>
    The field's *label* to be rendered in the list of fields
</dd><dt>value</dt>
<dd>
    The value of the field
</dd><dt>visible</dt>
<dd>
    A boolean that indicates if the field should be visible, if <code>False</code> the field should not be rendered
</dd></dl> 
<h2><a name="field-reference"></a><a href="#field-reference">Field Reference<span class="anchor"> &#182;</span></a></h2><p>The following is a list of field tags which you can enter in a form.</p>
<h3><a name="check-select"></a><a href="#check-select">check-select<span class="anchor"> &#182;</span></a></h3><p>A check select fields is simlar to an HTML select control with the <code>multiple</code> attribute set. Such multiple select controls allow the user to select any number of options by holding down the Alt key. They suffer from a usability point of view in that it is not obvious (without additional text) that you can select multiple options. It is also way to easy to de-select a number of items by forgetting to hold down the Alt key. Moya offers an alternative to a multiple selected with the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_check-select.html">&lt;check-select&gt;</a> control which renders multiple options as check-boxes &ndash; but otherwise operates in the same way as a select.</p>
<h3><a name="checkbox"></a><a href="#checkbox">checkbox<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_checkbox.html">&lt;checkbox&gt;</a> tag renders an input with type checkbox, which displays an icon that may be checked or unchecked. You can tell Moya what value a checkbox should set on the form data when selected with the <code>on</code> attribute.</p>
<h3><a name="hidden-input"></a><a href="#hidden-input">hidden-input<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_hidden-input.html">&lt;hidden-input&gt;</a> tag renders an input with type <code>hidden</code>. A <em>hidden</em> input does not visibly display anything in the form, but can be used to associate information with the form that is sent back to the server when submitted.</p>
<div class="alert alert-warning">Note that hidden inputs may be validated in the same way as other inputs, but if there are errors when validating the field, they can not be displayed since the input is hidden.</div><h3><a name="input"></a><a href="#input">input<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_input.html">&lt;input&gt;</a> tag renders a simple HTML <code>input</code>.</p>
<h3><a name="password"></a><a href="#password">password<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_password.html">&lt;password&gt;</a> tag renders an HTML input of type <code>password</code>, which will hide what the users has entered with asterisks.</p>
<h3><a name="radio"></a><a href="#radio">radio<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_radio.html">&lt;radio&gt;</a> rag renders an HTML <em>radio button</em>, which may be selected or not-selected. Radio buttons differ from check-boxes in that only one radio button in a <em>group</em> may be selected. A group is defined by using the same <code>name</code> for the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_radio.html">&lt;radio&gt;</a> tags in the group. For example, the following code creates three radio buttons:</p>
<code>
<radio name="option" text="Option 1" on="1"/>
<radio name="option" text="Option 2" on="2"/>
<radio name="option" text="Option 3" on="3"/>
</code><p>If the user selects a different radio button, the previously selected button will be de-selected. The value <code>option</code> in the form data will be set to the <code>on</code> attribute of the selected radio button.</p>
<aside>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_radio-group.html">&lt;radio-group&gt;</a> tag (see below) may be used to render a more visually distinct group.</aside><h3><a name="radio-group"></a><a href="#radio-group">radio-group<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_radio-group.html">&lt;radio-group&gt;</a> renders a group of radio buttons in a single field group in the form. Without a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_radio-group.html">&lt;radio-group&gt;</a>, each radio button will have it's own label and have the same margin / padding as other fields. Here's an example of a radio group:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">radio-group</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"option"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Radio&nbsp;Group"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">radio</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Option&nbsp;1"</span><span class="tag tagcontent">&nbsp;on=</span><span class="attrib tag tagcontent">"1"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">radio</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Option&nbsp;2"</span><span class="tag tagcontent">&nbsp;on=</span><span class="attrib tag tagcontent">"2"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">radio</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Option&nbsp;3"</span><span class="tag tagcontent">&nbsp;on=</span><span class="attrib tag tagcontent">"3"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/radio-group</span><span class="tag">&gt;</span></div></pre><p>Note, that when using a radio group, you need only set the <code>name</code> of the group, the <code>name</code> attribute of the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_radio.html">&lt;radio&gt;</a> tags will be ignored inside a group.</p>
<h3><a name="select"></a><a href="#select">select<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_select.html">&lt;select&gt;</a> tag renders an HTML select control, which is a list of possible values that my be selected by the user. The values used in a select are set with <a class="tag" href="tags/httpmoyaprojectcomforms/tag_option.html">&lt;option&gt;</a> tags which appear inside the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_select.html">&lt;select&gt;</a>. Here's an example of a select control with three possible values:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">select</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"fruit"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Pick&nbsp;a&nbsp;fruit"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"apples"</span><span class="tag">&gt;</span>Apples</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"oranges"</span><span class="tag">&gt;</span>Oranges</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"pears"</span><span class="tag">&gt;</span>Pears</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/select</span><span class="tag">&gt;</span></div></pre><p>The text enclosed in the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_option.html">&lt;option&gt;</a> tag is what is shown to the user. The <code>value</code> attribute defines the value which will be set on the form data.</p>
<h4><a name="option-groups"></a><a href="#option-groups">Option Groups<span class="anchor"> &#182;</span></a></h4><p>Options in a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_select.html">&lt;select&gt;</a> may be organized in to distinct groups to make them easier to search for with the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_opt-group.html">&lt;opt-group&gt;</a> tag. Here's an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">select</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"fruit_or_veg"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Pick&nbsp;something"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">opt-group</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Fruit"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"apples"</span><span class="tag">&gt;</span>Apples</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"oranges"</span><span class="tag">&gt;</span>Oranges</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"pears"</span><span class="tag">&gt;</span>Pears</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/opt-group</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">opt-group</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Vegetable"</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"carrot"</span><span class="tag">&gt;</span>Carrot</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">option</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"potato"</span><span class="tag">&gt;</span>Potato</span><span class="tag">&lt;</span><span class="endtagname tag">/option</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/opt-group</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"></span><span class="tag">&lt;</span><span class="endtagname tag">/select</span><span class="tag">&gt;</span></div></pre><p>The code above defines two opt-groups; one for the fruit and one for vegetables under an appropriate heading.</p>
<aside>Although option groups are a standard feature of HTML, there is surprisingly little consistency amongst browsers in how option groups are displayed.</aside><h3><a name="submit-button"></a><a href="#submit-button">submit-button<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_submit-button.html">&lt;submit-button&gt;</a> tag renders a button that will submit the form. The <code>text</code> attribute sets the text to be displayed on the button. This should be something that reflects what will happen when you click the button; 'Edit', 'Create' etc.</p>
<p>Submit buttons can also set a value on the form when they are clicked; if you supply a <code>name</code> attribute then clicking the button will store the value given in the <code>value</code> attribute (which may be empty).</p>
<h4><a name="form-actions"></a><a href="#form-actions">Form Actions<span class="anchor"> &#182;</span></a></h4><p>If you have more than one submit button, you can enclose them in a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_submit-button.html">&lt;submit-button&gt;</a> tag which will render the buttons horizontally rather than one per row. Here's an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">actions</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">button</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"action"</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"edit"</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Edit&nbsp;Post"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">button</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"action&nbsp;value="</span><span class="tag tagcontent">cancel</span><span class="tag">&gt;</span>&nbsp;text=</span><span class="attrib">"Cancel"</span>/&gt;</div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="endtagname tag">/actions</span><span class="tag">&gt;</span></div></pre><p>This will render two submit buttons. The first one will set the value <code>action</code> to <code>'edit'</code>, the second will set <code>action</code> to <code>'cancel'</code>. The buttons will be displayed on a single row, which looks more natural than a button per row.</p>
<aside>This tag is purely visual, and won't change the behavior of the form.</aside><h3><a name="text-area"></a><a href="#text-area">text-area<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_text-area.html">&lt;text-area&gt;</a> tag renders an HTML textarea, which is a multiple-line text input control. Text areas are better suited for situations where the user is required to enter several lines of text, such as in comments or post content.</p>
<h3><a name="upload"></a><a href="#upload">upload<span class="anchor"> &#182;</span></a></h3><p>The <a class="tag" href="tags/httpmoyaprojectcomforms/tag_upload.html">&lt;upload&gt;</a> tag renders a control to upload a file. This is typically rendered by browsers with a button that opens a dialog for the user to select a file to upload.</p>
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="feedback.html">&larr; 10. Moya Feedback</a>
        </li>
        
        <li class="next">
            <a href="jsonrpc.html">12. Moya JSON-RPC &rarr;</a>
        </li>
    </ul>
</div>


        </div>
        
        <div class="doctree-panel col-md-3">
        <ul>
    
    <li><a href="#installation">Installation</a><ul>
    
    <li><a href="#test-forms">Test Forms</a></li>
    
    <li><a href="#form-namespace">Form Namespace</a></li>
    
</ul></li>
    
    <li><a href="#designing-forms">Designing Forms</a><ul>
    
    <li><a href="#extending">Extending</a></li>
    
</ul></li>
    
    <li><a href="#working-with-forms">Working with Forms</a><ul>
    
    <li><a href="#form-parameters">Form Parameters</a></li>
    
</ul></li>
    
    <li><a href="#rendering-forms">Rendering Forms</a><ul>
    
    <li><a href="#form-styles">Form Styles</a></li>
    
    <li><a href="#form-templates">Form Templates</a></li>
    
    <li><a href="#custom-styles">Custom Styles</a></li>
    
    <li><a href="#manual-rendering">Manual Rendering</a></li>
    
    <li><a href="#form-content">Form Content</a></li>
    
    <li><a href="#custom-fields">Custom Fields</a></li>
    
</ul></li>
    
    <li><a href="#processing-forms">Processing Forms</a><ul>
    
    <li><a href="#populating-forms">Populating Forms</a></li>
    
    <li><a href="#processing-fields">Processing Fields</a></li>
    
    <li><a href="#field-validation">Field Validation</a></li>
    
    <li><a href="#setting-errors">Setting Errors</a></li>
    
    <li><a href="#adapting-form-data">Adapting Form Data</a></li>
    
    <li><a href="#applying-forms">Applying forms</a></li>
    
</ul></li>
    
    <li><a href="#csrf-protection">CSRF Protection</a><ul>
    
    <li><a href="#how-it-work">How it Work</a></li>
    
    <li><a href="#disabling-csrf">Disabling CSRF</a></li>
    
    <li><a href="#manual-csrf-check">Manual CSRF check</a></li>
    
</ul></li>
    
    <li><a href="#form-object-reference">Form Object Reference</a><ul>
    
    <li><a href="#form-object">Form Object</a></li>
    
    <li><a href="#field-objects">Field Objects</a></li>
    
</ul></li>
    
    <li><a href="#field-reference">Field Reference</a><ul>
    
    <li><a href="#check-select">check-select</a></li>
    
    <li><a href="#checkbox">checkbox</a></li>
    
    <li><a href="#hidden-input">hidden-input</a></li>
    
    <li><a href="#input">input</a></li>
    
    <li><a href="#password">password</a></li>
    
    <li><a href="#radio">radio</a></li>
    
    <li><a href="#radio-group">radio-group</a></li>
    
    <li><a href="#select">select</a></li>
    
    <li><a href="#submit-button">submit-button</a></li>
    
    <li><a href="#text-area">text-area</a></li>
    
    <li><a href="#upload">upload</a></li>
    
</ul></li>
    
</ul>
        </div>
        
    </div>
</div>

    <div id="push"></div>

    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Moya is &copy; 2014 <a href="#">Moya Software Foundation</a>.</p>
      </div>
    </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.js"></script>


</body>

</html>