<!DOCTYPE html>
<!-- saved from url=(0065)http://twitter.github.io/bootstrap/examples/starter-template.html -->
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Moya Tutorial</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Le styles -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="assets/css/custom.css" rel="stylesheet">

        <style>
        
        </style>
    </head>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

  <body>
    <div id="wrap">
    <div id="main-nav" class="navbar navbar-default navbar-static-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".doc-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Moya Documentation</a>
            </div>
            <nav class="collapse navbar-collapse doc-navbar-collapse" role="navigation">
                <ul class="nav navbar-nav">
                    <li >
                        <a href="index.html">Reference</a>
                    </li>
                    <li >
                        <a href="tags/index.html">Tags</a>
                    </li>
                    <li class="active">
                        <a href="tutorial.html">Tutorial</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    
<div class="container">



    <div class="row">
        <div class="col-md-9">
            <h1>Moya Tutorial</h1>
            <p>This tutorial will cover the building of a fully functional website with Moya.</p>
<p>You can work through the tutorial without reading the rest of the documentation. Much of the detail will be glossed over for the sake of brevity, but will contain links to the <a href="index.html" title="Moya Documentation">Reference</a> documentation if you want the details.</p>
<p>The website we are going to build is a <em>microblogging</em> service, not unlike <a href="http://twitter.com">Twitter</a>. We're not going to attempt to replicate <em>everything</em> Twitter does (the Twitter developers have nothing to fear), just a single-user timeline.</p>
<h2><a name="prerequisites"></a><a href="#prerequisites">Prerequisites<span class="anchor"> &#182;</span></a></h2><p>Before we start, you will need to first <a href="installation.html" title="Installing Moya">install Moya</a> if you haven't already. And as a bare minimum you will need to be familiar with using the command line, and have a text editor for editing code. It will also help if you are familiar with basic <a href="http://en.wikipedia.org/wiki/HTML">HTML</a>.</p>
<h2><a name="blether"></a><a href="#blether">Blether<span class="anchor"> &#182;</span></a></h2><p>The site we are going to build will be called <em>Blether</em>, which is a Scottish word, meaning <em>to chat</em>. We're aiming for a single <em>timeline</em> of 140 character messages &ndash; or <em>blethers</em>.</p>
<aside>Ever wondered why Twitter has a limit of 140 characters? It's because that's the maximum number of characters you can send in a mobile text message. But who tweets by text these days?</aside><h2><a name="starting-the-project"></a><a href="#starting-the-project">Starting the Project<span class="anchor"> &#182;</span></a></h2><p>We're going to use the Moya command line application to create a project framework for us. This will give us a starting point for our project.</p>
<p>Run the following command from the command line to create a basic project:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;start&nbsp;project&nbsp;--title&nbsp;Blether&nbsp;-a</div></pre><p>The <code>--title</code> option sets the title of the project. The <code>-a</code> switch tells Moya to accept the defaults where possible. When you run this command, Moya will ask you for a few details it needs to build the project. When it finishes, you should see confirmation that the project files were written successfully.</p>
<aside>If you don't want to re-enter these details at the command line, you can save them to your <a href="start.html#moyarc" title="Starting a Project">moyarc</a> file.</aside><p>The default project build by <code>moya start</code> contains a simple content management system, comments, a blog, a contact page, a feedback form and an <em>admin</em> site.</p>
<p>Before we can have a look at our site, we must first create the database, which will store the site's dynamic data (users, posts, comments etc). Navigate to the <code>blether</code> directory and run the following command:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;db&nbsp;sync</div></pre><p>You should see confirmation that the database has been synced (tables created). The site will actually be usable at this point, but we should first run the following command to create an initial user and set up some related objects in the database. Enter the following at the command line:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;auth#cmd.init</div></pre><p>This runs an interactive <a href="commands.html" title="Commands">command</a> from the <a href="auth.html" title="Moya Auth (users and permissions)">Moya Auth</a> library, it will ask you for the name of the <em>superuser</em> account. You may leave this as the default of <code>superuser</code>, or enter a username of your own. Moya will also ask you for a password. Since the site is not accessible on the internet just yet, feel free to enter a memorable password here, such as 'password'. Moya will also ask you for an email address &ndash; you may leave this blank if you wish; if the site were live it is this address that would be used to send you mail.</p>
<h2><a name="running-a-server"></a><a href="#running-a-server">Running a Server<span class="anchor"> &#182;</span></a></h2><p>You may now <em>serve</em> the site with the following command:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;runserver</div></pre><p>You should see a few pages of log messages followed by a message that lets you know that the development server is running. You can now open a browser on the same machine and navigate to <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a>.</p>
<aside>You may not have seen a URL like <b>http://127.0.0.1:8000</b> before. When you enter <b>moya runserver</b> on the command line, Moya runs a webserver on your computer. The <b>127.0.0.1</b> part is a special <a href="http://en.wikipedia.org/wiki/IP_Address">IP address</a> which connects to your local machine. The <b>:8000</b> part of the URL indicates that the <em>port</em> is 8000. Webservers typically use port 80, but Moya runs the development server on port 8000 to avoid conflict.</aside><p>The first page you will see on your site is a confirmation page that Moya is serving content. You will see a line in the console for every file the browser requests. There will be an entry for the page you are viewing, and other files it references, such as images, <a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a> and <a href="http://en.wikipedia.org/wiki/CSS">CSS</a>.</p>
<p>Feel free to explore the default site. You can log in with your superuser account by clicking on the <em>Log in</em> link at the top right of the page. Be sure to have a look at the Admin site (<code>/admin/</code>) which will let you manage the contents of your database.</p>
<h3><a name="server-xml"></a><a href="#server-xml">Server XML<span class="anchor"> &#182;</span></a></h3><p>When you run the server, Moya runs <a href="moyacode.html" title="Moya Code">Moya Code</a>, which is executable code stored in XML. The first such file Moya runs is <code>server.xml</code> which tells Moya which <em>libraries</em> the project will use. You will find a <code>server.xml</code> for your project in the <code>logic</code> directory. It should look something like the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"><br></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;Initialize&nbsp;a&nbsp;server&nbsp;--&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">server</span><span class="tag tagcontent">&nbsp;docname=</span><span class="attrib tag tagcontent">"main"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"><br></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">log</span><span class="tag">&gt;</span>Starting&nbsp;up!</span><span class="tag">&lt;</span><span class="endtagname tag">/log</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"><br></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;Import&nbsp;libraries&nbsp;for&nbsp;use&nbsp;in&nbsp;your&nbsp;project&nbsp;--&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.debug"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">".debug"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.auth"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.session"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.signup"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.admin"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.static"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.favicon"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.welcome"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.links"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.bootstrap"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.forms"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line20"></a><div class="line line-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.widgets"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line21"></a><div class="line line-21">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.comments"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line22"></a><div class="line line-22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.pages"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line23"></a><div class="line line-23">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.blog"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line24"></a><div class="line line-24">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.feedback"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line25"></a><div class="line line-25">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.jsonrpc"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line26"></a><div class="line line-26">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.wysihtml5"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line27"></a><div class="line line-27">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;py=</span><span class="attrib tag tagcontent">"moya.libs.recaptcha"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line28"></a><div class="line line-28"><br></div><a name="line29"></a><div class="line line-29">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;The&nbsp;'site'&nbsp;library,&nbsp;for&nbsp;non&nbsp;reusable&nbsp;content&nbsp;--&gt;</span></div><a name="line30"></a><div class="line line-30">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;location=</span><span class="attrib tag tagcontent">"./site"</span><span class="tag tagcontent">&nbsp;priority=</span><span class="attrib tag tagcontent">"10"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line31"></a><div class="line line-31">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"site"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"site.blether"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line32"></a><div class="line line-32"><br></div><a name="line33"></a><div class="line line-33">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;Install&nbsp;applications&nbsp;(instances&nbsp;of&nbsp;a&nbsp;library)&nbsp;--&gt;</span></div><a name="line34"></a><div class="line line-34">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"forms"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.forms"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line35"></a><div class="line line-35">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"widgets"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.widgets"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line36"></a><div class="line line-36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"auth"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.auth"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/auth/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line37"></a><div class="line line-37">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">mount</span><span class="tag tagcontent">&nbsp;app=</span><span class="attrib tag tagcontent">"auth"</span><span class="tag tagcontent">&nbsp;mountpoint=</span><span class="attrib tag tagcontent">"middleware"</span><span class="tag tagcontent">&nbsp;url=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line38"></a><div class="line line-38">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"session"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.session"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line39"></a><div class="line line-39">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"signup"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.signup"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/signup/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line40"></a><div class="line line-40">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"admin"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.admin"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/admin/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line41"></a><div class="line line-41">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"media"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.static"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/static/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line42"></a><div class="line line-42">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"debug"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.debug"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/debug/"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">".debug"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line43"></a><div class="line line-43">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"bootstrap"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.twitter.bootstrap"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line44"></a><div class="line line-44">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"welcome"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.welcome"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line45"></a><div class="line line-45">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"links"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.links"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line46"></a><div class="line line-46">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"favicon"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.favicon"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line47"></a><div class="line line-47">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"comments"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.comments"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/comments/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line48"></a><div class="line line-48">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"pages"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.pages"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line49"></a><div class="line line-49">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"blog"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.blog"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/blog/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line50"></a><div class="line line-50">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"feedback"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.feedback"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/feedback/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line51"></a><div class="line line-51">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"jsonrpc"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.jsonrpc"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line52"></a><div class="line line-52">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"wysihtml5"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.wysihtml5"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line53"></a><div class="line line-53">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"recaptcha"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moya.google.recaptcha"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line54"></a><div class="line line-54"><br></div><a name="line55"></a><div class="line line-55">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/server</span><span class="tag">&gt;</span></div><a name="line56"></a><div class="line line-56"><br></div><a name="line57"></a><div class="line line-57"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>The <code>server.xml</code> above was created when we ran <code>moya start project</code>. Since we accepted all the defaults, there is a good amount of libraries already set up. You may add and remove features by editing this file, but for the purposes of this tutorial we will stick with the auto-generated code.</p>
<h2><a name="creating-the-library"></a><a href="#creating-the-library">Creating the Library<span class="anchor"> &#182;</span></a></h2><p>All functionality in Moya is contained within a <em>library</em>, which is a bundle of files (code, templates, CSS, Javascript, images etc.) responsible for handling URLs, or implementing features. Let's create a library for our Blether project. In the project directory, enter the following command:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;start&nbsp;library&nbsp;--title&nbsp;Blether&nbsp;--mount&nbsp;/&nbsp;-a</div></pre><p>The <code>--title</code> option tells Moya the title of the library, <code>--mount /</code> tells Moya to <em>mount</em> it on the root URL, and <code>-a</code> accepts all defaults. When you run this command, Moya creates the files and directories for a working library and modifies <code>server.xml</code>.</p>
<p>If you open up <code>server.xml</code>, you should see that the start command has added two lines inside the <a class="tag" href="tags/httpmoyaprojectcom/tag_server.html">&lt;server&gt;</a> tag :</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--Added&nbsp;by&nbsp;'moya&nbsp;start&nbsp;library'--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">import</span><span class="tag tagcontent">&nbsp;location=</span><span class="attrib tag tagcontent">"./local/moyaproject.blether"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">install</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"blether"</span><span class="tag tagcontent">&nbsp;lib=</span><span class="attrib tag tagcontent">"moyaproject.blether"</span><span class="tag tagcontent">&nbsp;mount=</span><span class="attrib tag tagcontent">"/"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><div class="alert alert-warning"><strong>NOTE</strong> Some details may be different if you used your own Organization name.</div><p>These two lines ensure that the library is loaded and can handle URLs.</p>
<p>If you run the server now, you will find that Moya is <em>not</em> yet serving our Blether library on <code>/</code>. This is because the default project mounts a library which shows a simple page of welcome text on <code>/</code>. Comment out (or remove) the two lines in your <code>server.xml</code> that referencing the <em>welcome</em> library.</p>
<p>Now if you navigate to <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> you should find a simple example page to demonstrate the new library is working. Next, we will replace this with microblogging service.</p>
<aside>You may have noticed that there are other libraries mounted on <b>/</b>. This is because a library can decide whether it will handle a particular URL under its mount point. If a library decides <em>not</em> to handle a URL, then Moya will try the next library in turn, until it the URL is handled.</aside><h2><a name="editing-the-library"></a><a href="#editing-the-library">Editing the Library<span class="anchor"> &#182;</span></a></h2><p>The <code>start library</code> command has written the library files to a directory called <code>local</code> (in the project directory). This directory will contain the libraries you have authored yourself. There's also a <code>external</code> directory which will contain third party libraries.</p>
<p>The name of the library will be in the form of <code>&lt;your organization&gt;.blether</code> where <code>&lt;your organization&gt;</code> is replaced with your answer to the organization question in the start command. The files for the Blether library will be contained in a directory of the same name. For example in my project the new library would be in <code>local/moyaproject.blether</code> &ndash; in your project the <code>moyaproject</code> would be different.</p>
<p>If you navigate to the Blether library, you should see it contains the following files:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">.</div><a name="line2"></a><div class="line line-2">|--&nbsp;__init__.py</div><a name="line3"></a><div class="line line-3">|--&nbsp;lib.ini</div><a name="line4"></a><div class="line line-4">|--&nbsp;locale</div><a name="line5"></a><div class="line line-5">|&nbsp;&nbsp;&nbsp;`--&nbsp;readme.txt</div><a name="line6"></a><div class="line line-6">|--&nbsp;logic</div><a name="line7"></a><div class="line line-7">|&nbsp;&nbsp;&nbsp;|--&nbsp;content.xml</div><a name="line8"></a><div class="line line-8">|&nbsp;&nbsp;&nbsp;|--&nbsp;forms.xml</div><a name="line9"></a><div class="line line-9">|&nbsp;&nbsp;&nbsp;|--&nbsp;models.xml</div><a name="line10"></a><div class="line line-10">|&nbsp;&nbsp;&nbsp;|--&nbsp;mountpoints.xml</div><a name="line11"></a><div class="line line-11">|&nbsp;&nbsp;&nbsp;|--&nbsp;readme.txt</div><a name="line12"></a><div class="line line-12">|&nbsp;&nbsp;&nbsp;|--&nbsp;signals.xml</div><a name="line13"></a><div class="line line-13">|&nbsp;&nbsp;&nbsp;|--&nbsp;tags.xml</div><a name="line14"></a><div class="line line-14">|&nbsp;&nbsp;&nbsp;|--&nbsp;views.xml</div><a name="line15"></a><div class="line line-15">|&nbsp;&nbsp;&nbsp;`--&nbsp;widgets.xml</div><a name="line16"></a><div class="line line-16">|--&nbsp;media</div><a name="line17"></a><div class="line line-17">|&nbsp;&nbsp;&nbsp;`--&nbsp;readme.txt</div><a name="line18"></a><div class="line line-18">`--&nbsp;templates</div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;`--&nbsp;moyaproject.blether</div><a name="line20"></a><div class="line line-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--&nbsp;base.html</div><a name="line21"></a><div class="line line-21">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`--&nbsp;widgets</div><a name="line22"></a><div class="line line-22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`--&nbsp;readme.txt</div></pre><p>The directory structure is explained in detail in <a href="library.html">Creating a Library</a>, but for now we are going to concentrate on the XML files in the <code>logic</code> sub-directory &ndash; which contains executable code.</p>
<p>The start library command has created a number of XML files for us, such as <b>models.xml</b>, <b>content.xml</b>, <b>widgets.xml</b> etc. The filenames are merely a suggestion for how to organize a typical project. You are free to name your code in any way.</p>
<p>For this tutorial we will be putting everything in a single file, so go ahead and delete all the .xml files in the <code>logic</code> directory. Then create a file called <code>blether.xml</code> which should contain the following (feel free to cut and paste):</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com"</span><span class="tag tagcontent"></span></div><a name="line2"></a><div class="line line-2"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:let=</span><span class="attrib tag tagcontent">"http://moyaproject.com/let"</span><span class="tag tagcontent"></span></div><a name="line3"></a><div class="line line-3"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:forms=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag tagcontent"></span></div><a name="line4"></a><div class="line line-4"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:html=</span><span class="attrib tag tagcontent">"http://moyaproject.com/html"</span><span class="tag tagcontent"></span></div><a name="line5"></a><div class="line line-5"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:db=</span><span class="attrib tag tagcontent">"http://moyaproject.com/db"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"><br></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;Code&nbsp;goes&nbsp;here&nbsp;--&gt;</span></div><a name="line8"></a><div class="line line-8"><br></div><a name="line9"></a><div class="line line-9"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>This code is entirely <em>boilerplate</em>; the <a class="tag" href="tags/httpmoyaprojectcom/tag_moya.html">&lt;moya&gt;</a> tag begins the Moya code file, and the XML <a href="xml.html#namespaces" title="XML">namespace</a> declations tell Moya which tags we will be using. We will be adding code to this file in the rest of this tutorial.</p>
<h2><a name="creating-a-mountpoint"></a><a href="#creating-a-mountpoint">Creating a Mountpoint<span class="anchor"> &#182;</span></a></h2><p>The first thing we want to do is to create a <em>mountpoint</em>. This is how Moya maps an incoming URL to the the <em>view</em> that will generate a response.</p>
<p>Open <code>blether.xml</code> and insert the following inside the <a class="tag" href="tags/httpmoyaprojectcom/tag_moya.html">&lt;moya&gt;</a> tag.</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">mountpoint</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"main"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">url</span><span class="tag tagcontent">&nbsp;route=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;view=</span><span class="attrib tag tagcontent">"#view.front"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/mountpoint</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"><br></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.front"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">return-str</span><span class="tag">&gt;</span>Ready&nbsp;to&nbsp;Blether!</span><span class="tag">&lt;</span><span class="endtagname tag">/return-str</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><p>Now if you run the server and go to the root URL you should find that the text in the <a class="tag" href="tags/httpmoyaprojectcom/tag_view.html">&lt;view&gt;</a> tag above appears in your browser.</p>
<p>So what is happening here? Moya compares the requested url (<code>/</code>) to the <code>route</code> attribute on the <a class="tag" href="tags/httpmoyaprojectcom/tag_url.html">&lt;url&gt;</a> tags in the project &ndash; and it finds a match with <a class="tag" href="tags/httpmoyaprojectcom/tag_url.html">&lt;url&gt;</a> above. Moya then looks at the attribute called <code>view</code> which contains the text <code>#view.front</code>. This is an example of an <a href="moyacode.html#element-references" title="Moya Code">element reference</a>, which directs Moya to another tag; in this case the <a class="tag" href="tags/httpmoyaprojectcom/tag_view.html">&lt;view&gt;</a> tag we just wrote. Moya then executes the code in the view to generate a response for the browser.</p>
<p>We will learn how to generate a more interesting response later, for now we will move on to creating creating a database model to store blethers.</p>
<h2><a name="creating-the-model"></a><a href="#creating-the-model">Creating the Model<span class="anchor"> &#182;</span></a></h2><p>In order to store the blethers in the database we need to create a <em>model definition</em>, which describes the fields in a database table.</p>
<p>Add the following lines to <code>blether.xml</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">model</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"Blether"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/db"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">datetime</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"posted_time"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Blethered&nbsp;on"</span><span class="tag tagcontent">&nbsp;null=</span><span class="attrib tag tagcontent">"no"</span><span class="tag tagcontent">&nbsp;auto=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">string</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;length=</span><span class="attrib tag tagcontent">"140"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="endtagname tag">/model</span><span class="tag">&gt;</span></div></pre><p>This creates a simple model with two fields; <code>posted_time</code> is the date the blether was posted, and <code>text</code> is the contents of the blether.</p>
<p>When you add a new model, you will need to <em>sync</em> the database again, in order to create the new tables. Run the following to create tables for the blether model:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;db&nbsp;sync</div></pre><p>With the model created, we can now work on the user interface to add new blethers to the timeline.</p>
<h2><a name="blether-form"></a><a href="#blether-form">Blether Form<span class="anchor"> &#182;</span></a></h2><p>We need a simple form consisting of a text area and a button to submit a new blether. Moya's <a href="forms.html" title="Moya Forms">form library</a> makes creating such forms relatively simple. Add the following to <code>blether.xml</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.new-blether"</span><span class="tag tagcontent">&nbsp;style=</span><span class="attrib tag tagcontent">"basic"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">text-area</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"140"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Blether!"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">validate-field</span><span class="tag tagcontent">&nbsp;field=</span><span class="attrib tag tagcontent">"text"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">fail</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"len:value&nbsp;gt&nbsp;140"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;140&nbsp;characters&nbsp;is&nbsp;enough&nbsp;for&nbsp;anyone!</div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/fail</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/validate-field</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9"></span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div></pre><p>This is an example of a <em>form definition</em>. It has two form fields; a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_text-area.html">&lt;text-area&gt;</a> called <code>text</code>, and a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_submit-button.html">&lt;submit-button&gt;</a>. It also has a <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate-field.html">&lt;validate-field&gt;</a> tag which checks that fields have been entered correctly; in this case it detects if the user has entered a blether greater than 140 characters in length.</p>
<p>To add this to our web application, we will need to create a <em>content</em> definition, which we will cover in the next section:</p>
<h2><a name="blether-content"></a><a href="#blether-content">Blether Content<span class="anchor"> &#182;</span></a></h2><p>Moya <em>content</em> is essentially a high level description of a page, which is used to assemble HTML from various components. We need a <em>content definition</em> to display a form and the list of blethers. Cut and paste the following to your <code>blether.xml</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.front"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Blether</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">html:</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"col-md-6&nbsp;col-md-offset-3"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">render</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/html:div</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8"></span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div></pre><p>This code begins the content definition and sets the title to <code>'Blether'</code>. Content is divided in to <em>sections</em> which tell Moya what to render in various parts of the page (such as body, column, footer etc). Our content definition defines a single section called <code>body</code>, which will contain the majority of the page.</p>
<p>Inside the <a class="tag" href="tags/httpmoyaprojectcom/tag_section.html">&lt;section&gt;</a> tag is a <code>div</code> tag which wraps its children in a simple HTML <code>&lt;div&gt;</code> with the class <code>"col-md-6 col-md-offset-3"</code>. This is <a href="http://getbootstrap.com/">Bootstrap</a> CSS which creates a narrow column for our blethers.</p>
<p>Inside the column is a <code>render</code> tag which renders a form. Note that it has a condition (<code>if</code> attribute] which skips the form if the current user is not an admin user (because we don't want regular visitors to create blethers).</p>
<p>Next we will cover how to use this content definition to render a page.</p>
<h2><a name="updating-the-view"></a><a href="#updating-the-view">Updating the View<span class="anchor"> &#182;</span></a></h2><p>The simplest way to render content is to add a <code>content</code> attribute to the <a class="tag" href="tags/httpmoyaprojectcom/tag_view.html">&lt;view&gt;</a>. This tells Moya to render the content with any data generated by the view.</p>
<p>To see the form, replace the <a class="tag" href="tags/httpmoyaprojectcom/tag_view.html">&lt;view&gt;</a> with the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.front"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.front"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">if</span><span class="tag tagcontent">&nbsp;test=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.new-blether"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/if</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><p>This will get our form and store it an a value called <code>form</code>, which can then be rendered by the content.</p>
<p>If you run the server now &ndash; and you are logged in &ndash; you should see a text area and a button. The <a class="tag" href="tags/httpmoyaprojectcom/tag_if.html">&lt;if&gt;</a> tag ensures that the form is only shown if you are a logged in as an admin user. You may now enter text, but nothing will happen when you click the submit button as the code isn't yet <em>processing</em> the form. Replace the view with the following to do just that:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.front"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.front"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">if</span><span class="tag tagcontent">&nbsp;test=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.new-blether"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">validate</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">db:</span><span class="tag tagname">create</span><span class="tag tagcontent">&nbsp;model=</span><span class="attrib tag tagcontent">"#Blether"</span><span class="tag tagcontent">&nbsp;let:text=</span><span class="attrib tag tagcontent">"form.data.text"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">redirect-to</span><span class="tag tagcontent">&nbsp;path=</span><span class="attrib tag tagcontent">"."</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/forms:validate</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/if</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><p>This gets the form as before, but it also calls <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate.html">&lt;validate&gt;</a> which checks the form for errors, and runs the enclosed code if the form was submitted successfully. Inside the <a class="tag" href="tags/httpmoyaprojectcomforms/tag_validate.html">&lt;validate&gt;</a> we call <a class="tag" href="tags/httpmoyaprojectcomdb/tag_create.html">&lt;create&gt;</a> which adds a new blether to the database, then call <a class="tag" href="tags/httpmoyaprojectcom/tag_redirect-to.html">&lt;redirect-to&gt;</a> to reload the page.</p>
<p>If you enter a blether now and submit, you should find that the form resets, but the blethers wont be visible. We will cover how to render the blethers in the next section.</p>
<h2><a name="rendering-blethers"></a><a href="#rendering-blethers">Rendering Blethers<span class="anchor"> &#182;</span></a></h2><p>To render the blethers created by the user, we must read them back from the database. This can be done with the <a class="tag" href="tags/httpmoyaprojectcomdb/tag_query.html">&lt;query&gt;</a> tag as follows:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">db:</span><span class="tag tagname">query</span><span class="tag tagcontent">&nbsp;model=</span><span class="attrib tag tagcontent">"#Blether"</span><span class="tag tagcontent">&nbsp;orderby=</span><span class="attrib tag tagcontent">"-posted_time"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"blethers"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>This <em>queries</em> the database for all the blethers, sorted by the time they were posted.</p>
<p>Add this line to the view, which should now be as follows:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.front"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.front"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">db:</span><span class="tag tagname">query</span><span class="tag tagcontent">&nbsp;model=</span><span class="attrib tag tagcontent">"#Blether"</span><span class="tag tagcontent">&nbsp;orderby=</span><span class="attrib tag tagcontent">"-posted_time"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"blethers"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">if</span><span class="tag tagcontent">&nbsp;test=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.new-blether"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">validate</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">db:</span><span class="tag tagname">create</span><span class="tag tagcontent">&nbsp;model=</span><span class="attrib tag tagcontent">"#Blether"</span><span class="tag tagcontent">&nbsp;let:text=</span><span class="attrib tag tagcontent">"form.data.text"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">redirect-to</span><span class="tag tagcontent">&nbsp;path=</span><span class="attrib tag tagcontent">"."</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/forms:validate</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/if</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10"></span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div></pre><p>Next, we need to modify the content to render the blethers. The value returned from <a class="tag" href="tags/httpmoyaprojectcomdb/tag_query.html">&lt;query&gt;</a> is a <em>queryset</em> which can be treated like a list. Replace the content definition with the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.front"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Blether</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">html:</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"col-md-6&nbsp;col-md-offset-3"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">render</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">for</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"blethers"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"blether"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"blether.html"</span><span class="tag tagcontent">&nbsp;let:blether=</span><span class="attrib tag tagcontent">"blether"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/for</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/html:div</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"></span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div></pre><p>Note the addition of the <a class="tag" href="tags/httpmoyaprojectcom/tag_for.html">&lt;for&gt;</a> loop. This <em>iterates</em> through the blethers and calls <a class="tag" href="tags/httpmoyaprojectcom/tag_node.html">&lt;node&gt;</a> to render an individual blether with a <em>template</em> called <code>blether.html</code>. A <a href="templates.html" title="Templates">template</a> is a text file with a special markup to generate HTML.</p>
<p>The template should be the following:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"alert&nbsp;alert-info"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"text-muted&nbsp;text-right"</span><span class="tag">&gt;</span>posted&nbsp;</span><span class="sub">${localize:blether.posted_time}</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="sub">${blether.text}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>This template inserts the blether posted time and text in to a panel.</p>
<p>Save the template as <code>blether.html</code> in the library's <code>templates</code> directory.</p>
<h2><a name="finished-product"></a><a href="#finished-product">Finished Product<span class="anchor"> &#182;</span></a></h2><p>If you have been following along with the code edits, your <code>blether.xml</code> should look like the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagcontent">?xml&nbsp;version=</span><span class="attrib tag tagcontent">"1.0"</span><span class="tag tagcontent">&nbsp;encoding=</span><span class="attrib tag tagcontent">"UTF-8"</span><span class="tag tagcontent">?</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com"</span><span class="tag tagcontent"></span></div><a name="line3"></a><div class="line line-3"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:let=</span><span class="attrib tag tagcontent">"http://moyaproject.com/let"</span><span class="tag tagcontent"></span></div><a name="line4"></a><div class="line line-4"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:forms=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag tagcontent"></span></div><a name="line5"></a><div class="line line-5"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:html=</span><span class="attrib tag tagcontent">"http://moyaproject.com/html"</span><span class="tag tagcontent"></span></div><a name="line6"></a><div class="line line-6"><span class="tag tagcontent">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:db=</span><span class="attrib tag tagcontent">"http://moyaproject.com/db"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"><br></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">mountpoint</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"main"</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">url</span><span class="tag tagcontent">&nbsp;route=</span><span class="attrib tag tagcontent">"/"</span><span class="tag tagcontent">&nbsp;view=</span><span class="attrib tag tagcontent">"#view.front"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/mountpoint</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"><br></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">view</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"view.front"</span><span class="tag tagcontent">&nbsp;content=</span><span class="attrib tag tagcontent">"#content.front"</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">db:</span><span class="tag tagname">query</span><span class="tag tagcontent">&nbsp;model=</span><span class="attrib tag tagcontent">"#Blether"</span><span class="tag tagcontent">&nbsp;orderby=</span><span class="attrib tag tagcontent">"-posted_time"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"blethers"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">if</span><span class="tag tagcontent">&nbsp;test=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">get</span><span class="tag tagcontent">&nbsp;form=</span><span class="attrib tag tagcontent">"#form.new-blether"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"form"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">forms:</span><span class="tag tagname">validate</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">db:</span><span class="tag tagname">create</span><span class="tag tagcontent">&nbsp;model=</span><span class="attrib tag tagcontent">"#Blether"</span><span class="tag tagcontent">&nbsp;let:text=</span><span class="attrib tag tagcontent">"form.data.text"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">redirect-to</span><span class="tag tagcontent">&nbsp;path=</span><span class="attrib tag tagcontent">"."</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/forms:validate</span><span class="tag">&gt;</span></div><a name="line20"></a><div class="line line-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/if</span><span class="tag">&gt;</span></div><a name="line21"></a><div class="line line-21">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/view</span><span class="tag">&gt;</span></div><a name="line22"></a><div class="line line-22"><br></div><a name="line23"></a><div class="line line-23">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">model</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"Blether"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/db"</span><span class="tag">&gt;</span></div><a name="line24"></a><div class="line line-24">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">datetime</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"posted_time"</span><span class="tag tagcontent">&nbsp;label=</span><span class="attrib tag tagcontent">"Blethered&nbsp;on"</span><span class="tag tagcontent">&nbsp;null=</span><span class="attrib tag tagcontent">"no"</span><span class="tag tagcontent">&nbsp;auto=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line25"></a><div class="line line-25">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">string</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;length=</span><span class="attrib tag tagcontent">"140"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line26"></a><div class="line line-26">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/model</span><span class="tag">&gt;</span></div><a name="line27"></a><div class="line line-27"><br></div><a name="line28"></a><div class="line line-28">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">form</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"form.new-blether"</span><span class="tag tagcontent">&nbsp;style=</span><span class="attrib tag tagcontent">"basic"</span><span class="tag tagcontent">&nbsp;xmlns=</span><span class="attrib tag tagcontent">"http://moyaproject.com/forms"</span><span class="tag">&gt;</span></div><a name="line29"></a><div class="line line-29">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">text-area</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"text"</span><span class="tag tagcontent">&nbsp;maxlength=</span><span class="attrib tag tagcontent">"140"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line30"></a><div class="line line-30">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">submit-button</span><span class="tag tagcontent">&nbsp;text=</span><span class="attrib tag tagcontent">"Blether!"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line31"></a><div class="line line-31">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">validate-field</span><span class="tag tagcontent">&nbsp;field=</span><span class="attrib tag tagcontent">"text"</span><span class="tag">&gt;</span></div><a name="line32"></a><div class="line line-32">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">fail</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"len:value&nbsp;gt&nbsp;140"</span><span class="tag">&gt;</span></div><a name="line33"></a><div class="line line-33">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;140&nbsp;characters&nbsp;is&nbsp;enough&nbsp;for&nbsp;anyone!</div><a name="line34"></a><div class="line line-34">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/fail</span><span class="tag">&gt;</span></div><a name="line35"></a><div class="line line-35">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/validate-field</span><span class="tag">&gt;</span></div><a name="line36"></a><div class="line line-36">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/form</span><span class="tag">&gt;</span></div><a name="line37"></a><div class="line line-37"><br></div><a name="line38"></a><div class="line line-38">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.front"</span><span class="tag">&gt;</span></div><a name="line39"></a><div class="line line-39">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Blether</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line40"></a><div class="line line-40">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line41"></a><div class="line line-41">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">html:</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"col-md-6&nbsp;col-md-offset-3"</span><span class="tag">&gt;</span></div><a name="line42"></a><div class="line line-42">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">render</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line43"></a><div class="line line-43">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">for</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"blethers"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"blether"</span><span class="tag">&gt;</span></div><a name="line44"></a><div class="line line-44">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"blether.html"</span><span class="tag tagcontent">&nbsp;let:blether=</span><span class="attrib tag tagcontent">"blether"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line45"></a><div class="line line-45">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/for</span><span class="tag">&gt;</span></div><a name="line46"></a><div class="line line-46">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/html:div</span><span class="tag">&gt;</span></div><a name="line47"></a><div class="line line-47">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line48"></a><div class="line line-48">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div><a name="line49"></a><div class="line line-49"><br></div><a name="line50"></a><div class="line line-50"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>If you run the server now, you should be able to enter a 140 character blether in the text area, which will be added to the timeline when you click the submit button.</p>
<h2><a name="extra-credit"></a><a href="#extra-credit">Extra Credit<span class="anchor"> &#182;</span></a></h2><p>Our blether timeline is working now, but there is a flaw; the list of blethers could grow very large. We should split up the blethers in to more manageable pages, a process known as <em>pagination</em>.</p>
<p>One of the advantages of working with Moya's content system, is that it is simple to add new features to a page. Let's use a <a href="content.html#widgets" title="Content">widget</a> from the built in <a href="widgets.html" title="Moya Widgets">Moya Widgets</a> library.</p>
<p>First of all, add the namespace <code>xmlns:w="http://moyaproject.com/widgets"</code> to the start of the file. This makes a number of widgets available with the <code>w:</code> prefix. Next, replace the <a class="tag" href="tags/httpmoyaprojectcom/tag_for.html">&lt;for&gt;</a> loop in the content with a <a class="tag" href="tags/httpmoyaprojectcomwidgets/tag_paginate.html">&lt;paginate&gt;</a> widget. The content should now look like the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">content</span><span class="tag tagcontent">&nbsp;libname=</span><span class="attrib tag tagcontent">"content.front"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Blether</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">section</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"body"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">html:</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"col-md-6&nbsp;col-md-offset-3"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">render</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"form"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">"permission:'admin'"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag xmlns">w:</span><span class="tag tagname">paginate</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"blethers"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"blether"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">node</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"blether.html"</span><span class="tag tagcontent">&nbsp;let:blether=</span><span class="attrib tag tagcontent">"blether"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/w:paginate</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/html:div</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/section</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"></span><span class="tag">&lt;</span><span class="endtagname tag">/content</span><span class="tag">&gt;</span></div></pre><p>Now if you run the server and add a number of blethers, you should see a pagination control when the list is 10 items long. You can use this control to navigate forwards and backwards between each page, or jump to a particular page.</p>
<h2><a name="moyas-debugger"></a><a href="#moyas-debugger">Moya's Debugger<span class="anchor"> &#182;</span></a></h2><p>While not strictly necessary for this tutorial, now would be a good time to test Moya's debugger. Try running the development server with the following:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;runserver&nbsp;--breakpoint</div></pre><p>Now if you refresh the page on the browser, you should find that the terminal is displaying code from the start of the view, and waiting for your input. If you type <code>s</code> and hit return, you can step through the code a line at a time. Enter <code>help</code> to see a list of other commands you can use.</p>
<p>Rather than use the <code>--breakpoint</code> switch, you may also insert a <a class="tag" href="tags/httpmoyaprojectcom/tag_breakpoint.html">&lt;breakpoint&gt;</a> in your code, which tells Moya to stop executing the code at that point and drop in to the debugger.</p>
<p>The <a href="moyacode.html#using-the-debugger" title="Moya Code">debugger</a> is a great way of analyzing your code when it isn't running as expected.</p>
<h2><a name="what-next"></a><a href="#what-next">What Next?<span class="anchor"> &#182;</span></a></h2><p>The project we have just created demonstrates a few of the core concepts of a Moya project. If you want to build on it, you should probably read the <a href="index.html" title="Moya Documentation">Reference</a> and/or have a look at the example projects in the source code.</p>
<p>There is a much more feature-rich version of Blether in the examples directory. This Blether project implements more Twitter-like features, including multiple users/timelines and the ability to follow other users. You should find this a good example of a production-ready web application written in Moya.</p>
        </div>
        
        <div class="doctree-panel col-md-3">
        <ul>
    
    <li><a href="#prerequisites">Prerequisites</a></li>
    
    <li><a href="#blether">Blether</a></li>
    
    <li><a href="#starting-the-project">Starting the Project</a></li>
    
    <li><a href="#running-a-server">Running a Server</a><ul>
    
    <li><a href="#server-xml">Server XML</a></li>
    
</ul></li>
    
    <li><a href="#creating-the-library">Creating the Library</a></li>
    
    <li><a href="#editing-the-library">Editing the Library</a></li>
    
    <li><a href="#creating-a-mountpoint">Creating a Mountpoint</a></li>
    
    <li><a href="#creating-the-model">Creating the Model</a></li>
    
    <li><a href="#blether-form">Blether Form</a></li>
    
    <li><a href="#blether-content">Blether Content</a></li>
    
    <li><a href="#updating-the-view">Updating the View</a></li>
    
    <li><a href="#rendering-blethers">Rendering Blethers</a></li>
    
    <li><a href="#finished-product">Finished Product</a></li>
    
    <li><a href="#extra-credit">Extra Credit</a></li>
    
    <li><a href="#moyas-debugger">Moya&#39;s Debugger</a></li>
    
    <li><a href="#what-next">What Next?</a></li>
    
</ul>
        </div>
        
    </div>

</div>

    <div id="push"></div>

    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Moya is &copy; 2014 <a href="#">Moya Software Foundation</a>.</p>
      </div>
    </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.js"></script>


</body>

</html>