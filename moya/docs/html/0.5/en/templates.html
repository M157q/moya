<!DOCTYPE html>
<!-- saved from url=(0065)http://twitter.github.io/bootstrap/examples/starter-template.html -->
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Templates</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Le styles -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="assets/css/custom.css" rel="stylesheet">

        <style>
        
        </style>
    </head>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

  <body>
    <div id="wrap">
    <div id="main-nav" class="navbar navbar-default navbar-static-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".doc-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Moya Documentation</a>
            </div>
            <nav class="collapse navbar-collapse doc-navbar-collapse" role="navigation">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="index.html">Reference</a>
                    </li>
                    <li >
                        <a href="tags/index.html">Tags</a>
                    </li>
                    <li >
                        <a href="tutorial.html">Tutorial</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    
<div class="container">
    <div class="row">
        <div class="doc-content col-md-9">
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="library.html">&larr; 10. Creating a Library</a>
        </li>
        
        <li class="next">
            <a href="urls.html">12. URLs, Views and Middleware &rarr;</a>
        </li>
    </ul>
</div>


            <h1>Templates</h1>
            <p>A <em>template</em> is a text file with a special markup that Moya uses to generate output (typically HTML). Templates are combined with data generated from Moya code to produce the page requested by the user.</p>
<h2><a name="template-filesystem"></a><a href="#template-filesystem">Template Filesystem<span class="anchor"> &#182;</span></a></h2><p>Templates are stored in a directory within each Library (see <a href="library.html#template-section">Creating a Library</a>). When Moya starts up, the template folders for each installed library are combined to creates a single virtual filesystem (called <code>"templates"</code>). This filesystem is used internally by Moya, but may be used as any other filesystem.</p>
<p>You can see which directories are used in the templates filesystem with the following command line:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;fs&nbsp;templates</div></pre><p>You can also see a tree view of the templates filesystem with the following:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;fs&nbsp;templates&nbsp;--tree</div></pre><p>When adding templates to a library it is important to follow the convention of putting them in a directory named after the Library long name. For example, if your library is called <code>moya.blether</code> then your templates should be stored <code>templates/moya.blether/</code>.</p>
<p>This convention makes it possible for a library to override a template in another library, which can be useful for customizing the look and feel of your web application. For example, in <code>moya.pages</code> (a builtin library) there is a template called <code>page.html</code> with the path <code>moya.pages/page.html</code>. If another library also contains a template with a path of <code>moya.pages/page.html</code> it will be used in place of the original, <em>if</em> the library it belongs to has a higher <em>priority</em> (see below).</p>
<p>When there are two or more conflicting paths in template directories, Moya selects the one with the highest <code>priority</code> value (defined in the <a href="library.html#template-section" title="Creating a Library">[template] section</a> of lib.ini). If two templates have the same priority, then the library imported last wins.</p>
<p>A project may also define a templates directory in <a href="project.html#templates-section" title="Building a Project">project settings</a> which is added to the <code>templates</code> filesystem. This allows you to customize template at a project level.</p>
<h2><a name="rendering-templates"></a><a href="#rendering-templates">Rendering Templates<span class="anchor"> &#182;</span></a></h2><p>There are a few tags which you may use in Moya code to render a template. One such tag is <a class="tag" href="tags/httpmoyaprojectcom/tag_render-template.html">&lt;render-template&gt;</a> which renders a template to a string. Let's look at an example of how you might use this tag:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">render-template</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product.html"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"html"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>The above code will read a template from your templates filesystem called <code>"product.html"</code>, it will then <em>render</em> that template and store the response in a variable called <code>html</code>.</p>
<p>In the preceding example, the value for template is a <em>relative</em> path (it doesn't start with a forward slash). When Moya is asked to load a template from a relative path, it will look for it in the templates directory for the current application (where <a class="tag" href="tags/httpmoyaprojectcom/tag_render-template.html">&lt;render-template&gt;</a> was called). So if the above code was called from an application installed from the library <code>moya.sushifinder</code>, Moya will read the template <code>/moya.sushifinder/product.html</code>.</p>
<p>If a template path is <em>absolute</em> (i.e. starts with a slash), then Moya looks for the template in the root of your templates filesystem. Absolute template paths aren't used as often, because most applications will use only the templates bundled in the library. Templates in the root of the template filesystem are reserved for common site-wide templates.</p>
<p>You can also tell Moya to read a template from <em>another</em> application with the <code>from</code> attribute, which expects an application name, or a <em>library</em> name if you only have one instance of that library installed. For example, here's how you could render a template from the Moya Pages library:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">render-template</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"page.html"</span><span class="tag tagcontent">&nbsp;from=</span><span class="attrib tag tagcontent">"moya.pages"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"html"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>This will read the template from <code>/moya.pages/page.html</code>. You could replaced the template attribute with this path, but using <code>from</code> attribute is preferred because it is possible for an application to change the directory where its templates are stored, with the <a href="project.html#customizing-applications" title="Building a Project">templates_directory</a> setting.</p>
<p>You can supply data to templates with the <a class="tag" href="tags/httpmoyaprojectcom/tag_render-template.html">&lt;render-template&gt;</a> tag in a similar way to compound data types, such as <a href="moyacode.html#dictionaries" title="Moya Code">dictionaries</a>. The following renders a template called <code>product.html</code> and supplies a template data value called <code>product</code>, which may be inserted in to the output:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">render-template</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product.html"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"html"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">str</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span>Nigiri</span><span class="tag">&lt;</span><span class="endtagname tag">/str</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/render-template</span><span class="tag">&gt;</span></div></pre><p>You can also use the LET extension, which can be more compact. The following is equivalent to the previous example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">render-template</span><span class="tag tagcontent">&nbsp;template=</span><span class="attrib tag tagcontent">"product.html"</span><span class="tag tagcontent">&nbsp;let:product=</span><span class="attrib tag tagcontent">"Nigiri"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"html"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>There are other ways of rendering templates, which we will cover in <a href="urls.html">URLs, Views and Middleware</a>.</p>
 
<h2><a name="template-basics"></a><a href="#template-basics">Template Basics<span class="anchor"> &#182;</span></a></h2><p>In a template, everything inside <code>{%</code> and <code>%}</code> is considered a template <em>tag</em> and will contain processing instructions that change the output in some way. Some tags are stand-alone, but others may contain blocks of more template code. For example, the <code>{% for %}</code> tag repeats a block of code for every value in a collection. It will repeat everything up until and <code>{% endfor %}</code> tag.</p>
<p>Data may be inserted directly within a template with the same substitution syntax used in Moya code. Anything inside <code>${</code> and <code>}</code> is considered an expression, and will be replaced with the result of that expression.</p>
<p>Here's an example of a simple block of template code. The following template takes a list of strings called <code>crew</code> and will generate an HTML unordered list:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">ul</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;for&nbsp;character&nbsp;in&nbsp;crew&nbsp;%}</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span><span class="sub">${title:crew}</span>&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="templatetag">{%&nbsp;endfor&nbsp;%}</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/ul</span><span class="tag">&gt;</span></div></pre><p>The value of <code>crew</code> may be any collection, such as a simple list, but in a real site it would likely be the results of a query run on the database. Lets use the value of <code>crew</code> generated from the following Moya code:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">list</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"crew"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">str</span><span class="tag">&gt;</span>john</span><span class="tag">&lt;</span><span class="endtagname tag">/str</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">str</span><span class="tag">&gt;</span>rygel</span><span class="tag">&lt;</span><span class="endtagname tag">/str</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">str</span><span class="tag">&gt;</span>scorpius</span><span class="tag">&lt;</span><span class="endtagname tag">/str</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/list</span><span class="tag">&gt;</span></div></pre><p>When the template is rendered with the list above, Moya will generate the following HTML markup:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">ul</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"><br></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span>John&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span>Rygel&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span>Scorpius&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"><br></div><a name="line7"></a><div class="line line-7"></span><span class="tag">&lt;</span><span class="endtagname tag">/ul</span><span class="tag">&gt;</span></div></pre><h2><a name="controlling-whitespace"></a><a href="#controlling-whitespace">Controlling Whitespace<span class="anchor"> &#182;</span></a></h2><p>You may have noticed that the example in the example template code produced two extra lines inside the <code>&lt;ul&gt;</code> html tag. This is because a new line was created for the <code>{% for %}</code> and <code>{% endfor %}</code> template tags. The new line characters are still present in the rendered output. We <em>could</em> format our code in the following way to avoid littering the output HTML with superfluous new lines:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">ul</span><span class="tag">&gt;</span><span class="templatetag">{%&nbsp;for&nbsp;character&nbsp;in&nbsp;crew&nbsp;%}</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span><span class="sub">${title:crew}</span>&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span><span class="templatetag">{%&nbsp;endfor&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/ul</span><span class="tag">&gt;</span></div></pre><p>The downside is that now our template code is somewhat harder to read. Moya offers an alternative way of removing un-needed whitespace. If you add a hyphen (<code>-</code>) at the beginning of a tag (i.e. <code>{%-</code>) then the whitespace up to the start of the tag will be removed. If you add a hyphen at the end of the tag (i.e. <code>-%}</code>) then the whitespace after the tag will be removed. Here's how you would use this extra syntax with the example template code:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">ul</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%-&nbsp;for&nbsp;character&nbsp;in&nbsp;crew&nbsp;%}</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span><span class="sub">${title:crew}</span>&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="templatetag">{%&nbsp;endfor&nbsp;-%}</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/ul</span><span class="tag">&gt;</span></div></pre><p>This will produce the following output:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">ul</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span>John&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span>Rygel&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">li</span><span class="tag">&gt;</span>Scorpius&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/li</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/ul</span><span class="tag">&gt;</span></div></pre><h2><a name="escaping"></a><a href="#escaping">Escaping<span class="anchor"> &#182;</span></a></h2><p>Moya <em>escapes</em> variables used in templates by default. In other words, it replaces special characters such has <code>&lt;</code> <code>&gt;</code> and <code>&amp;</code> which might otherwise be interpreted by the browser as HTML.</p>
<p>For example, let's say we have a variable called <code>name</code>, presumably entered by a user at some point. This user has given his name as <code>&lt;h1&gt;Rygel&lt;/h1&gt;</code> in an attempt to have his name styled as a header everywhere it is mentioned. Moya will replace the angular brackets with <code>&amp;gt;</code> and <code>&amp;lt;</code> when the value is rendered in a template &ndash; and the user will see literal angular brackets.</p>
<p>There are some occasions where variables contain markup that you <em>do</em> want to be inserted in to the rendered output. In these situations, you can use the <code>html:</code> modifier to tell Moya <em>not</em> to escape the result of an expression. For example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="sub">${html:markup}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div></pre><p>The above template code will insert the value of <code>markup</code> directly in to the HTML without modification.</p>
<div class="alert alert-warning"><strong>WARNING</strong> Exercise caution when inserting HTML in to your templates like this. It would be a significant security risk if an end user is able to directly influence the markup generated by your templates.</div> 
<h2><a name="template-inheritance"></a><a href="#template-inheritance">Template Inheritance<span class="anchor"> &#182;</span></a></h2><p>In a typical web page there will be some content that is unique to the page, but a large portion of it will be common to other (possibly all) pages. For instance, a page might have a menu system, columns, footer etc. And there will probably also be a number of common assets like Javascript and CSS. If would be tiresome if we had to construct all this common code for each page we want to render. Moya makes it possible to extract the common elements in a web page so they need only be written once, via <em>template inheritance</em>.</p>
<p>The <a href="templates.html#extends" title="Templates">{% extends %}</a> template tag tells Moya that a template <em>extends</em> another template. Moya will combine the content in the extended template with the one being rendered. Let's look at an example of a template (<code>product.html</code>) which extends from a template called <code>base.html</code>:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;extends&nbsp;"base.html"&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;block&nbsp;"content"&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">h1</span><span class="tag">&gt;</span>Order&nbsp;</span><span class="sub">${title:product}</span>&nbsp;Here</span><span class="tag">&lt;</span><span class="endtagname tag">/h1</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div></pre><p>Note that the above template is obviously incomplete and doesn't contain the HTML required for a working page.</p>
<p>The line <code>{% extends "base.html" %}</code> tells Moya to combine the contents of <code>product.html</code> with <code>base.html</code>. The <a href="templates.html#block" title="Templates">{% block %}</a> tag in <code>product.html</code> tells Moya that the markup it contains is a <em>block</em> with the name of <code>content</code>. The base template also contains a block of the same name, which will be replaced with the new block when the template is rendered.</p>
<p>Here's what <code>base.html</code> looks like:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">title</span><span class="tag">&gt;</span>Sushifinder</span><span class="tag">&lt;</span><span class="endtagname tag">/title</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"content"&nbsp;%}</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">h1</span><span class="tag">&gt;</span>Welcome&nbsp;to&nbsp;Sushifinder!</span><span class="tag">&lt;</span><span class="endtagname tag">/h1</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Order&nbsp;Sushi&nbsp;from&nbsp;your&nbsp;nearest&nbsp;restaurant</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>It's this base template which contains the standard HTML markup for a complete page. The <a href="templates.html#block" title="Templates">{% block %}</a> tag in <code>base.html</code> will be replaced with the contents of the similarly named block in <code>[c]product.html</code>.</p>
<p>Note, that if <code>product.html</code> did <em>not</em> contain a <code>content</code> block, then the markup in the base template's <code>content</code> block would not be changed. In this way, a template may selectively override parts of the template it extends.</p>
<p>There is no limit to the number of times a template can be extended. You <em>could</em> have a <code>base.html</code> template with a header and footer, and templates for page layout that extend <code>base.html</code>. If you find that you are cutting and pasting large blocks of markup for new templates, then it is a good indication you should create a new base template to extend from.</p>
<h3><a name="extending-blocks"></a><a href="#extending-blocks">Extending Blocks<span class="anchor"> &#182;</span></a></h3><p>When Moya extends a template it will replace blocks in the base template with content from the template being rendered. Occasionally, you may want to keep the content in the base template as well as adding new content. The <a href="templates.html#block" title="Templates">{% block %}</a> template tag accepts an extra argument that defines what will happen to the base content; <code>replace</code> is the default behaviour, but you may also use <code>append</code> which renders the new markup <em>after</em> the base markup, or <code>prepend</code> which puts the new markup <em>before</em> the base markup. Let's look at an example of this. The following is a block in a base template:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"css"&nbsp;%}</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">link</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/media/css/site.css"</span><span class="tag tagcontent">&nbsp;rel=</span><span class="attrib tag tagcontent">"stylesheel"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;content&nbsp;here&nbsp;--&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>If we were to extend a template with the <code>css</code> block above, we would loose that stylesheet link (by default). If we want to keep it, we can define our new block as follows:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;extends&nbsp;"base.html"&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;block&nbsp;"css"&nbsp;append&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">link</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/media/css/page.css"</span><span class="tag tagcontent">&nbsp;rel=</span><span class="attrib tag tagcontent">"stylesheel"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div></pre><p>If we were to render the above template, we would get the following output:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">head</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"><br></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">link</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/media/css/site.css"</span><span class="tag tagcontent">&nbsp;rel=</span><span class="attrib tag tagcontent">"stylesheel"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">link</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/media/css/page.css"</span><span class="tag tagcontent">&nbsp;rel=</span><span class="attrib tag tagcontent">"stylesheel"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"><br></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/head</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">&lt;!--&nbsp;content&nbsp;here&nbsp;--&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>As you can see, the rendered template includes the code from the <code>css</code> block, from both templates.</p>
<h2><a name="tags"></a><a href="#tags">Tags<span class="anchor"> &#182;</span></a></h2><p>All template tags following a similar pattern; the first word  inside the <code>{% %}</code> syntax is the name of the tag. The name may be followed by zero or more required parameters (text or expressions). Optional parameters are introduced by a single word followed by an expression.</p>
<p>Some template tags enclose a section of template code. These tags must be paired with an end tag which marks the end of the associated template code. For example, every <code>{% for %}</code> template tag must be paired with an <code>{% endfor %}</code>. It is also possible to mark the end of the most recently opened tag with <code>{% end %}</code>. However, it is generally recommended to use the explicit end tag, which is self-documenting and allows the template system to detect errors in your template code. The exception would be if the associated template code is short, perhaps on a single line, and you want it to be more compact.</p>
<h2><a name="conventions"></a><a href="#conventions">Conventions<span class="anchor"> &#182;</span></a></h2><p>Because a project is assembled from a number of libraries, it is important to provide a way to make all pages look like they belong to the same site regardless of which library rendered them. The following conventions emerged from the design of the built in libraries to do just that. As with all conventions, you should follow them only as long as they make sense for your use case.</p>
<div class="alert alert-warning"><strong>NOTE</strong> The following only applies to templates that create an entire page &ndash; and not to widget templates, or other templates that render individual components of a page.</div><p>Put a template in the library's template directory called <code>base.html</code> which other templates should ultimately extend. This ensures that there is a base template per library that may be overriden to customize look &amp; feel / branding. So templates in a library should start with the following line (unless they extend another base):</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;extend&nbsp;"base.html"&nbsp;%}</span></div></pre><p>Your base template should be empty apart from the following:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;extends&nbsp;"/base.html"&nbsp;%}</span></div></pre><p>This ensures that all templates ultimately extend <code>/base.html</code> which would contain the markup that should be common to all pages.</p>
<div class="alert alert-warning"><strong>REMINDER</strong> relative paths in extends will use a path relative to the library, absolute paths (starting with <b>/</b>) will be relative to the root of the templates filesystem.</div><p>If you created a project with the <b>moya start</b> command, it will have created a <code>/base.html</code> template as follows:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;extends&nbsp;"/moya.twitter.bootstrap/base.html"&nbsp;%}</span></div></pre><p>This further extends from a template in the <code>moya.twitter.bootstrap</code> library. This template is a based on one of the example in <a href="">http://getbootstrap.com/</a>, and creates a simple blank page with a navbar (menu). You can use this as a starting point for your project, or write a base from scratch.</p>
<h2><a name="tag-reference"></a><a href="#tag-reference">Tag Reference<span class="anchor"> &#182;</span></a></h2><p>The following are the tags you can use in Moya Templates:</p>
<h3><a name="attrib"></a><a href="#attrib">{% attrib %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;attrib&nbsp;[attributes]&nbsp;%}</div></pre><p>Renders a sequence of html attributes from a dict or dict-like collection. For example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;</span><span class="tag tagcontent templatetag">{%&nbsp;attrib&nbsp;id=</span><span class="attrib tag tagcontent templatetag">"body"</span><span class="tag tagcontent templatetag">,&nbsp;style=</span><span class="attrib tag tagcontent templatetag">"enhance"</span><span class="tag tagcontent templatetag">&nbsp;%}</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;Test</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>This produces the following output:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;id=</span><span class="attrib tag tagcontent">"body"</span><span class="tag tagcontent">&nbsp;style=</span><span class="attrib tag tagcontent">"enhance"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;Test</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>If the values of the dictionary are a list, Moya will render them with a space between each word.</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;</span><span class="tag tagcontent templatetag">{%&nbsp;attrib&nbsp;id=</span><span class="attrib tag tagcontent templatetag">"message"</span><span class="tag tagcontent templatetag">,&nbsp;class=['alert',&nbsp;'alert-error']&nbsp;%}</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;That&nbsp;didn't&nbsp;work</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>This would product the following output:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;id=</span><span class="attrib tag tagcontent">"message"</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"alert&nbsp;alert-error"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;That&nbsp;didn't&nbsp;work</div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>If any of the values are missing or <code>None</code>, then the attribute will be omitted entirely. For example, take the following template code:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;</span><span class="tag tagcontent templatetag">{%&nbsp;attrib&nbsp;class=post.extra_class&nbsp;%}</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sub">${html:post.html}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><p>if <code>post.extra_class</code> is <em>not</em> <code>None</code>, Moya will render a class attribute on the <code>&lt;div&gt;</code>. If <code>post.extra_class</code> <em>is</em> None, then there will be no class attribute in the output.</p>
<p>The preceding example is equivalent to the following:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;</span><span class="tag tagcontent templatetag">{%&nbsp;if&nbsp;not&nbsp;isnone:post.extra_class&nbsp;%}</span><span class="tag tagcontent">class=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent sub">${post.extra_class}</span><span class="attrib tag tagcontent">"</span><span class="tag tagcontent templatetag">{%&nbsp;endif&nbsp;%}</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="sub">${html:post.html}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div></pre><h3><a name="block"></a><a href="#block">{% block %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;block&nbsp;&lt;name&gt;&nbsp;[&lt;replace|append|prepend&gt;]&nbsp;%}{%&nbsp;endblock&nbsp;%}</div></pre><p>Creates a <em>named block</em>, which may be extended in a derived template. If a template with a named block extends another template with a similarly named block, then the contents will be combined with the block in the extended template.</p>
<p>For example, lets say we have the following template, named "base.html":</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;block&nbsp;"body"&nbsp;%}</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Content&nbsp;in&nbsp;base.html</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>And we are rendering the following template, which extends from "base.html":</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;extends&nbsp;"base.html"&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;block&nbsp;"body"&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>This&nbsp;content&nbsp;replaces&nbsp;the&nbsp;block&nbsp;in&nbsp;base.html</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div></pre><p>If we render the template above, it will render "base.html", but with the "body" block replaced with new code. The output will look like this:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>This&nbsp;content&nbsp;replaces&nbsp;the&nbsp;block&nbsp;in&nbsp;base.html</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><p>The default for a block is to completely replace the contents of the block it has extended. You can also opt to <em>append</em> the new content to the content in the extended template, or to <em>prepend</em> it (render it before the content in the extended template). You can select which by specifying one of 'append', 'prepend' or 'replace' (the default) in the block tag.</p>
<p>Here's how we might modify our template to include the content in block and the new content:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;extends&nbsp;"base.html"&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="templatetag">{%&nbsp;block&nbsp;"body"&nbsp;append&nbsp;%}</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>This&nbsp;content&nbsp;will&nbsp;be&nbsp;appended&nbsp;to&nbsp;the&nbsp;block&nbsp;in&nbsp;base.html</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4"></span><span class="templatetag">{%&nbsp;endblock&nbsp;%}</span></div></pre><p>If we render the above template, we will get the following output:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Content&nbsp;in&nbsp;base.html</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>This&nbsp;content&nbsp;will&nbsp;be&nbsp;appended&nbsp;to&nbsp;the&nbsp;block&nbsp;in&nbsp;base.html</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><h3><a name="cache"></a><a href="#cache">{% cache %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;cache&nbsp;for&nbsp;&lt;timespan&gt;&nbsp;[key&nbsp;&lt;key&nbsp;expression&gt;]&nbsp;[in&nbsp;&lt;cache&nbsp;name&gt;]&nbsp;%}{%&nbsp;endcache&nbsp;%}</div></pre><p>This tag caches the enclosed template code for a period of time. The first time Moya encounter this template tag, it renders the enclosed block and stores the result in a cache, with a key generated from a <em>key expression</em>, which should be either a string or a list of objects that will be converted in to a string. The next time Moya renders the same tag it will replace the block with the markup stored in the cache. For example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;cache&nbsp;for&nbsp;1d&nbsp;key&nbsp;[news.id,&nbsp;news.update_time]&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">div</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"news"</span><span class="tag">&gt;</span><span class="sub">${news.text}</span><span class="tag">&lt;</span><span class="endtagname tag">/div</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;endcache&nbsp;%}</span></div></pre><p>This will store the html in the cache for the <code>news</code> object, so that it doesn't have to render it every time. Note that the key is a combination of <code>news.id</code> and <code>news.update_time</code>, so a unique copy of the template code will be produced for every combination of these two variables. The value of <code>update_time</code> is used so that html is re-generated if the news is updated, otherwise it would not change for a full day.</p>
<p>Note that the primary reason for using this tag is to speed up rendering of templates. The simple example given here is likely quicker to render than it would be to look it up in the cache. A better candidate would be if either the template code inside the tag is particularly complex or it uses a slow database query. Good use of caching can reduce the load on the server significantly.</p>
<aside>Optimization may be the <em>primary</em> reason for using the cache template tag, but it may also be used to generate html that updates on a given schedule.</aside><h3><a name="call"></a><a href="#call">{% call %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;call&nbsp;&lt;macro&gt;&nbsp;[with&nbsp;&lt;parameters&gt;]&nbsp;[only]&nbsp;%}</div></pre><p>Call a previously defined template macro with optional parameters. If given, <em>parameters</em> should be a dict or similar object with parameters to be used as arguments to the template macro.</p>
<p>By default, a template macro has access to all the variables passed in to the template. This is generally useful, but if you specify the 'only' clause then the template macro will only have access to the arguments passed to it. The follow is an example of calling a template macro.</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;def&nbsp;greet&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Hello,&nbsp;</span><span class="sub">${name}</span>!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;enddef&nbsp;%}</span></div><a name="line4"></a><div class="line line-4"><br></div><a name="line5"></a><div class="line line-5"></span><span class="templatetag">{%&nbsp;call&nbsp;'greet'&nbsp;with&nbsp;name=</span><span class="attrib templatetag">"Scorpius"</span><span class="templatetag">&nbsp;%}</span></div><a name="line6"></a><div class="line line-6"></span><span class="templatetag">{%&nbsp;call&nbsp;'greet'&nbsp;with&nbsp;name=</span><span class="attrib templatetag">"Rygel"</span><span class="templatetag">&nbsp;%}</span></div></pre><p>This will produce the following output:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Hello,&nbsp;Scorpius!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Hello,&nbsp;Rygel!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div></pre><h3><a name="children"></a><a href="#children">{% children %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;children&nbsp;[as&nbsp;&lt;target&gt;]&nbsp;[with&nbsp;&lt;template&nbsp;arguments&gt;]&nbsp;[set&nbsp;&lt;options&nbsp;dict&gt;]&nbsp;[unique]&nbsp;%}</div></pre><p>Used in widgets and content, this will render the <em>children</em> of the content element.</p>
<h3><a name="console"></a><a href="#console">{% console %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;console&nbsp;&lt;text&nbsp;or&nbsp;object&gt;&nbsp;%}</div></pre><p>Used for debugging, Moya will write text or an object to the console when rendering a template.</p>
<h3><a name="data"></a><a href="#data">{% data %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;data&nbsp;[as&nbsp;&lt;name&gt;]&nbsp;%}{%&nbsp;enddata&nbsp;%}</div></pre><p>This will insert data in to the template context. The context of the tag should be JSON. If the <code>as</code> clause is specified, then this will be used as the name to store the JSON data. If no <code>as</code> clause is specified, then the JSON should be an object, and will update the template context with the objects keys / values.</p>
<p>Here's an example of creating a list in the template context called, "crew":</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;data&nbsp;as&nbsp;"crew"&nbsp;%}</span></div><a name="line2"></a><div class="line line-2">[</div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;"Rygel",</div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;"Scorpius",</div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;"Aeryn",</div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;"John"</div><a name="line7"></a><div class="line line-7">]</div><a name="line8"></a><div class="line line-8"></span><span class="templatetag">{%&nbsp;enddata&nbsp;%}</span></div></pre><h3><a name="def"></a><a href="#def">{% def %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;def&nbsp;&lt;macro&nbsp;name&gt;&nbsp;%}{%&nbsp;enddef&nbsp;%}</div></pre><p>Defines a <em>template macro</em>, which is re-usable template code that may be invoked with different parameters. Here's an example of a simple template macro:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;def&nbsp;"greet"&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Greet,&nbsp;</span><span class="sub">${name}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;enddef&nbsp;%}</span></div></pre><p>Template macros may be invoked with the <a href="templates.html#call" title="Templates">{% call %}</a> tag.</p>
<h3><a name="elif"></a><a href="#elif">{% elif %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;elif&nbsp;&lt;condition&gt;&nbsp;%}</div></pre><p>May be used inside an <code>{% if %}</code> tag. If the condition of the parent <code>{% if %}</code> is <em>false</em>, and the condition for this tag is <em>true</em> then the enclosed template code will be rendered. For example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;if&nbsp;fuel&nbsp;&gt;&nbsp;100&nbsp;%}</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Taking&nbsp;off!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;elif&nbsp;fuel&nbsp;&gt;&nbsp;0&nbsp;%}</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Not&nbsp;enough&nbsp;fuel.</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="templatetag">{%&nbsp;else&nbsp;%}</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Fuel&nbsp;tank&nbsp;is&nbsp;empty!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7"></span><span class="templatetag">{%&nbsp;endif&nbsp;%}</span></div></pre><h3><a name="else"></a><a href="#else">{% else %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;else&nbsp;%}</div></pre><p>May be used inside an <code>{% if %}</code> tag. If the condition (in the parent <code>if</code>) is <em>false</em> then the code inside the <code>{% else %}</code> will be executed. For example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;if&nbsp;fuel&nbsp;&gt;&nbsp;100&nbsp;%}</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Taking&nbsp;off!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;else&nbsp;%}</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Not&nbsp;enough&nbsp;fuel.</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="templatetag">{%&nbsp;endif&nbsp;%}</span></div></pre><h3><a name="emit"></a><a href="#emit">{% emit %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;emit&nbsp;&lt;text&gt;&nbsp;%}</div></pre><p>Insert markup directly in to the output without any processing. This is primarily used for outputting markup that looks like a template tag or substitution without processing it. For example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;emit&nbsp;"</span><span class="tag templatetag">&lt;</span><span class="tag templatetag tagname">p</span><span class="tag templatetag">&gt;</span><span class="templatetag sub">${literal}</span><span class="tag templatetag">&lt;</span><span class="tag templatetag tagname">p</span><span class="tag templatetag">&gt;</span><span class="templatetag">"&nbsp;%}</span></div></pre><p>This would produce the following output:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>${literal}</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span></div></pre><h3><a name="empty"></a><a href="#empty">{% empty %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;for&nbsp;%}{%&nbsp;empty&nbsp;%}{%&nbsp;endfor&nbsp;%}</div></pre><p>Used in conjuction with a <a href="templates.html#for" title="Templates">{% for %}</a> tag, this template code between an <code>{% empty %}</code> tag and the <code>{% endfor %}</code> tag is rendered if there were no values in the for loop (i.e. it was <em>empty</em>).</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;for&nbsp;character&nbsp;in&nbsp;crew&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="sub">${character}</span>&nbsp;is&nbsp;on&nbsp;board</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;empty&nbsp;%}</span></div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Nobody&nbsp;is&nbsp;on&nbsp;board!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="templatetag">{%&nbsp;endfor&nbsp;%}</span></div></pre><h3><a name="emptyblock"></a><a href="#emptyblock">{% emptyblock %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;emptyblock&nbsp;&lt;block&nbsp;name&gt;&nbsp;%}</div></pre><p>Shorthand for a <a href="templates.html#block" title="Templates">{% block %}</a> that has no content.</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">html</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">body</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="templatetag">{%&nbsp;emptyblock&nbsp;"body"&nbsp;%}</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/body</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/html</span><span class="tag">&gt;</span></div></pre><h3><a name="extends"></a><a href="#extends">{% extends %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;extends&nbsp;&lt;template&nbsp;path&gt;&nbsp;[from&nbsp;&lt;application&nbsp;name&gt;]&nbsp;%}</div></pre><p>Extends the current template from another template. If the path is <em>relative</em>, it is taken to be relative from the template directory associated with the current application. If it is <em>absolute</em>, it is assumed to be from the root of the <a href="templates.html#template-filesystem" title="Templates">templates filesystem</a>.</p>
<p>For example, lets say we have the following template in a library called sushifinder.shop:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;extends&nbsp;"shop.html"&nbsp;%}</div></pre><p>Because the path above is relative, Moya will extend from the template <code>/sushifinder.shop/shop.html</code> (in the templates filesystem).</p>
<p>The behavior will be different if we use an absolute path. For example:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;extends&nbsp;"/shop.html"&nbsp;%}</div></pre><p>This tells Moya to extend from the template "shop.html" in the root of the templates filesystem.</p>
<aside>It is rare to use absolute paths in the extends tag, because most templates will be in a directory unique to the application. The root directory should be reserved for important site wide templates. For example, most projects will have a "base.html" in the template root which contains the site-wide content.</aside><p>It is also possible to extend from a different application by specifying either the application or library name in the <code>from</code> clause. For example, here's how to extend from a template in the <code>moya.pages</code> library.</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;extends&nbsp;"page.html"&nbsp;from&nbsp;"moya.pages"&nbsp;%}</div></pre><p>This will extend from the template <code>/moya.pages/page.html</code>.</p>
<h3><a name="for"></a><a href="#for">{% for %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;for&nbsp;&lt;items&nbsp;list&gt;&nbsp;in&nbsp;&lt;collection&gt;&nbsp;%}{%&nbsp;endfor&nbsp;%}</div></pre><p>Repeat a block of code for every item in a collection. For example, if we have a list defined in Moya code as the following:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">list</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"crew"</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">var</span><span class="tag">&gt;</span>['John',&nbsp;'Human']</span><span class="tag">&lt;</span><span class="endtagname tag">/var</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">var</span><span class="tag">&gt;</span>['Rygel',&nbsp;'Hynerian']</span><span class="tag">&lt;</span><span class="endtagname tag">/var</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">var</span><span class="tag">&gt;</span>['Aeryn',&nbsp;'Peacekeeper']</span><span class="tag">&lt;</span><span class="endtagname tag">/var</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/list</span><span class="tag">&gt;</span></div></pre><p>We can render each item in the list with the following template code:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;for&nbsp;character,&nbsp;species&nbsp;in&nbsp;crew&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="sub">${character}</span>&nbsp;is&nbsp;a&nbsp;</span><span class="sub">${species}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;for&nbsp;%}</span></div></pre><p>See also the <a href="templates.html#empty" title="Templates">{% empty %}</a> template tag.</p>
<h3><a name="if"></a><a href="#if">{% if %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;if&nbsp;&lt;condition&gt;&nbsp;%}{%&nbsp;endfor&nbsp;%}</div></pre><p>Renders the enclosed block if a condition evaluates to true. For example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;if&nbsp;fuel&nbsp;&gt;&nbsp;100&nbsp;%}</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Taking&nbsp;off!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;endif&nbsp;%}</span></div></pre><h3><a name="include"></a><a href="#include">{% include %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;include&nbsp;&lt;template&nbsp;path&gt;&nbsp;[from&nbsp;&lt;application&nbsp;or&nbsp;library&gt;]&nbsp;%}</div></pre><p>Render another template in the current context. The included template has access to all the template variables from the template it was included from. The arguments are the same as the <a href="templates.html#extends" title="Templates">{% extends %}</a> tag.</p>
<h3><a name="inspect"></a><a href="#inspect">{% inspect %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;inspect&nbsp;&lt;object&gt;&nbsp;%}</div></pre><p>This tag will generate an HTML <code>&lt;pre&gt;</code> tag containing information about an object. The generated HTML will produce output in the same format as writing the object to the console.</p>
<p>This tag is a debug aid; it can help you visualize the data being rendered by your template. You should probably remove all inspect tags before your application goes in to production.</p>
<h3><a name="let"></a><a href="#let">{% let %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;let&nbsp;&lt;dict&gt;&nbsp;%}</div></pre><p>Insert data in to the template context. The first argument should be a dict. Keys and values from this dict are inserted in to the current context, and may be used as any other template variable. Here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;let&nbsp;foo=</span><span class="attrib templatetag">"bar"</span><span class="templatetag">,&nbsp;baz=</span><span class="attrib templatetag">"egg"</span><span class="templatetag">&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="sub">${foo}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="sub">${baz}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div></pre><h3><a name="markup"></a><a href="#markup">{% markup %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;markup&nbsp;&lt;markup&gt;&nbsp;[as&nbsp;&lt;output&nbsp;type&gt;]&nbsp;[target&nbsp;&lt;target&gt;]&nbsp;%}</div></pre><p>Render markup, such as bbcode and markdown. The type of the markup should be specified in the <code>as</code> clause. The target clause should specify what the output should be (default is html). Here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;markup&nbsp;"[b]Hello,&nbsp;World![/b]"&nbsp;as&nbsp;"bbcode"&nbsp;%}</span></div></pre><h3><a name="media"></a><a href="#media">{% media %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;media&nbsp;&lt;media&nbsp;path&gt;&nbsp;[media&nbsp;&lt;media&nbsp;library&gt;]&nbsp;[from&nbsp;&lt;application&nbsp;or&nbsp;library&gt;]&nbsp;%}</div></pre><p>Get a URL to a media file. Here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">img</span><span class="tag tagcontent">&nbsp;src="</span><span class="tag tagcontent templatetag">{%&nbsp;media&nbsp;'img/logo.png'&nbsp;from&nbsp;'moyaproject.sushifinder'&nbsp;%}</span><span class="tag">&gt;</span></div></pre><h3><a name="render"></a><a href="#render">{% render %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;render&nbsp;&lt;renderable&nbsp;object&gt;&nbsp;[with&nbsp;&lt;template&nbsp;data&gt;]&nbsp;[to&nbsp;&lt;target&nbsp;format&gt;]&nbsp;[set&nbsp;&lt;render&nbsp;options&gt;]&nbsp;%}</div></pre><p>Render an object.</p>
<h3><a name="renderall"></a><a href="#renderall">{% renderall %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;renderall&nbsp;&lt;renderable&nbsp;objects&gt;&nbsp;[with&nbsp;&lt;template&nbsp;data&gt;]&nbsp;[to&nbsp;&lt;target&nbsp;format&gt;]&nbsp;[set&nbsp;&lt;render&nbsp;options&gt;]&nbsp;%}</div></pre><p>Render a collection of objects.</p>
<h3><a name="singleline"></a><a href="#singleline">{% singleline %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;singleline&nbsp;%}{%&nbsp;endsingleline&nbsp;%}</div></pre><p>Removes all new-lines in a block of template code. Here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;singleline&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">Hello,&nbsp;World!</div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="templatetag">{%&nbsp;endsingleline&nbsp;%}</span></div></pre><p>This produces the following output:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span>Hello,&nbsp;World!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div></pre><h3><a name="summarize"></a><a href="#summarize">{% summarize %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;summarize&nbsp;chars&nbsp;NUMCHARS&nbsp;%}</div></pre><p>This tag takes a block of HTML and converts it to text. If the text has less than NUMCHARS it is unchanged. Otherwise, Moya will truncate it at a word boundary and add ellipses.</p>
<p>This is intended for situations where you want to preview the content of a page in some kind of index. In a blog's <em>recent posts</em> list for example. Here's how it could be used:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">h2</span><span class="tag">&gt;</span><span class="sub">${post.title}</span><span class="tag">&lt;</span><span class="endtagname tag">/h2</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"summary"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;summarize&nbsp;chars&nbsp;120&nbsp;%}</span><span class="sub">${html:post.html}</span><span class="templatetag">{%&nbsp;endsummarize&nbsp;%}</span></div><a name="line4"></a><div class="line line-4"></span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent templatetag">{%&nbsp;url&nbsp;'post'&nbsp;with&nbsp;slug=post.slug&nbsp;%}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span>read&nbsp;more</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div></pre><p>This would produce output such as the following:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">h2</span><span class="tag">&gt;</span>Moya&nbsp;a&nbsp;Huge&nbsp;Success</span><span class="tag">&lt;</span><span class="endtagname tag">/h2</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag tagcontent">&nbsp;class=</span><span class="attrib tag tagcontent">"summary"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">Yesterday,&nbsp;Moya&nbsp;became&nbsp;the&nbsp;most&nbsp;successful&nbsp;web&nbsp;development&nbsp;platform&nbsp;of&nbsp;all&nbsp;time,</div><a name="line4"></a><div class="line line-4">having&nbsp;made&nbsp;PHP&nbsp;obselete&nbsp;[&amp;hellips;]</div><a name="line5"></a><div class="line line-5"></span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6"></span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"/blog/post/moya-huge-sucess/"</span><span class="tag">&gt;</span>read&nbsp;more</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div></pre><h3><a name="trans"></a><a href="#trans">{% trans %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;trans&nbsp;[number&nbsp;&lt;number&gt;]&nbsp;[comment&nbsp;&lt;comment&nbsp;text&gt;]&nbsp;[context]&nbsp;%}</div></pre><p>Marks a block of text as translatable. The text within the trans block can be extracted with the <code>moya extract</code> command. If translation catalogs exist then the text will be replaced with the text for the given language.</p>
<p>Here's a simple template with translatable text:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="templatetag">{%&nbsp;trans&nbsp;comment&nbsp;'greeting'&nbsp;%}</span>Hello</span><span class="templatetag">{%&nbsp;endtrans&nbsp;%}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div></pre><p>If the translation catalogs exist, then 'Hello' will be replaced with 'Bonjour' or 'Hola' depending on the current locale.</p>
<h3><a name="url"></a><a href="#url">{% url %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;url&nbsp;&lt;url&nbsp;name&gt;&nbsp;[with&nbsp;&lt;url&nbsp;parameters&gt;]&nbsp;[from&nbsp;&lt;application&nbsp;or&nbsp;library&gt;]&nbsp;[query&nbsp;&lt;dict&nbsp;for&nbsp;query&nbsp;string&gt;]&nbsp;[base&nbsp;&lt;base&nbsp;url&gt;]&nbsp;%}</div></pre><p>Generate a named url from the project. The url name should be the <code>name</code> parameter in the <a class="tag" href="tags/httpmoyaprojectcom/tag_url.html">&lt;url&gt;</a> tag. If the url route contains any parameters, they should be supplied in the <code>with</code> clause. For example, let's say we have a url in our project defined like this:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">url</span><span class="tag tagcontent">&nbsp;route=</span><span class="attrib tag tagcontent">"/post/</span><span class="braced attrib tag tagcontent">{year}</span><span class="attrib tag tagcontent">/</span><span class="braced attrib tag tagcontent">{month}</span><span class="attrib tag tagcontent">/</span><span class="braced attrib tag tagcontent">{day}</span><span class="attrib tag tagcontent">/"</span><span class="tag tagcontent">&nbsp;view=</span><span class="attrib tag tagcontent">"view.post"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>If we want to link to a post in a template, we shouldn't hard-code the URL as the link would break if we mount the library in a different location. It's far better to use the <code>{% url %}</code> tag which will always generate a valid URL in the project. Here's how we would use it to generate a link to a particular post:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent templatetag">{%&nbsp;url&nbsp;'post'&nbsp;with&nbsp;year=2014,&nbsp;month=7,&nbsp;day=5&nbsp;%}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span>Birthday</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div></pre><p>By default the url tag generates URLs from the current application (where the template is being rendered from). If the URL is not in the current application, you can specify it with the <code>from</code> clause. Here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent templatetag">{%&nbsp;url&nbsp;'post'&nbsp;with&nbsp;year=2014,&nbsp;month=7,&nbsp;day=5&nbsp;from&nbsp;'blog'&nbsp;%}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span>Birthday</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div></pre><p>The <code>query</code> clause should be a dict, and will be used to generate a query string if present. Here's how we can add a query string to the previous example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent templatetag">{%&nbsp;url&nbsp;'post'&nbsp;with&nbsp;year=2014,&nbsp;month=7,&nbsp;day=5&nbsp;from&nbsp;'blog'&nbsp;query&nbsp;view='list'&nbsp;%}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span>Birthday</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div></pre><p>The url tag will generate a URL without a domain and scheme, which is fine if you are linking from within the same site. If you would like to create a <em>fully qualified</em> URL, you can supply the domain and scheme with the <code>base</code> clause. Here is an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">a</span><span class="tag tagcontent">&nbsp;href=</span><span class="attrib tag tagcontent">"</span><span class="attrib tag tagcontent templatetag">{%&nbsp;url&nbsp;'post'&nbsp;with&nbsp;year=2014,&nbsp;month=7,&nbsp;day=5&nbsp;from&nbsp;'blog'&nbsp;query&nbsp;view='list'&nbsp;base&nbsp;'http://myblog.org'&nbsp;%}</span><span class="attrib tag tagcontent">"</span><span class="tag">&gt;</span>Birthday</span><span class="tag">&lt;</span><span class="endtagname tag">/a</span><span class="tag">&gt;</span></div></pre><h3><a name="urlencode"></a><a href="#urlencode">{% urlencode %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;urlencode&nbsp;&lt;dict&nbsp;data&gt;&nbsp;%}</div></pre><p>URL encodes a dict or mapping expression. For use in query strings. here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;urlencode&nbsp;foo='bar',&nbsp;'baz'='egg'&nbsp;%}</span></div></pre><p>This will produce the following output:</p>
<pre class="moya-console format-html"><a name="line1"></a><div class="line line-1">foo=bar&amp;baz=egg</div></pre><h3><a name="verbatim"></a><a href="#verbatim">{% verbatim %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;verbatim&nbsp;%}{%&nbsp;endverbatim&nbsp;%}</div></pre><p>Suspends all processing of template tags inside the block. Useful for writing about template tags, without Moya attempting to render them. Here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;verbatim&nbsp;%}</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="templatetag">{%&nbsp;will&nbsp;not&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;template&nbsp;tag&nbsp;%}</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;endverbatim&nbsp;%}</span></div></pre><h3><a name="with"></a><a href="#with">{% with %}<span class="anchor"> &#182;</span></a></h3><pre class="moya-console format-"><a name="line1"></a><div class="line line-1">{%&nbsp;with&nbsp;&lt;template&nbsp;data&gt;&nbsp;%}</div></pre><p>Creates a temporary scope for template data. The code within the block will have access to the template data in addition to existing template data. Here's an example:</p>
<pre class="moya-console format-moyatemplate"><a name="line1"></a><div class="line line-1"></span><span class="templatetag">{%&nbsp;with&nbsp;character='Rygel'&nbsp;%}</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">p</span><span class="tag">&gt;</span><span class="sub">${character}</span>&nbsp;is&nbsp;my&nbsp;favorite&nbsp;character!</span><span class="tag">&lt;</span><span class="endtagname tag">/p</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"></span><span class="templatetag">{%&nbsp;endwith&nbsp;%}</span></div></pre><p>Note that template data inside a <code>{% with %}</code> tag <em>shadows</em> data that already exists. In the above example, if a value called <code>character</code> already exists in the template context, it will have its original value restored when the with tag ends.
</p>
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="library.html">&larr; 10. Creating a Library</a>
        </li>
        
        <li class="next">
            <a href="urls.html">12. URLs, Views and Middleware &rarr;</a>
        </li>
    </ul>
</div>


        </div>
        
        <div class="doctree-panel col-md-3">
        <ul>
    
    <li><a href="#template-filesystem">Template Filesystem</a></li>
    
    <li><a href="#rendering-templates">Rendering Templates</a></li>
    
    <li><a href="#template-basics">Template Basics</a></li>
    
    <li><a href="#controlling-whitespace">Controlling Whitespace</a></li>
    
    <li><a href="#escaping">Escaping</a></li>
    
    <li><a href="#template-inheritance">Template Inheritance</a><ul>
    
    <li><a href="#extending-blocks">Extending Blocks</a></li>
    
</ul></li>
    
    <li><a href="#tags">Tags</a></li>
    
    <li><a href="#conventions">Conventions</a></li>
    
    <li><a href="#tag-reference">Tag Reference</a><ul>
    
    <li><a href="#attrib">{% attrib %}</a></li>
    
    <li><a href="#block">{% block %}</a></li>
    
    <li><a href="#cache">{% cache %}</a></li>
    
    <li><a href="#call">{% call %}</a></li>
    
    <li><a href="#children">{% children %}</a></li>
    
    <li><a href="#console">{% console %}</a></li>
    
    <li><a href="#data">{% data %}</a></li>
    
    <li><a href="#def">{% def %}</a></li>
    
    <li><a href="#elif">{% elif %}</a></li>
    
    <li><a href="#else">{% else %}</a></li>
    
    <li><a href="#emit">{% emit %}</a></li>
    
    <li><a href="#empty">{% empty %}</a></li>
    
    <li><a href="#emptyblock">{% emptyblock %}</a></li>
    
    <li><a href="#extends">{% extends %}</a></li>
    
    <li><a href="#for">{% for %}</a></li>
    
    <li><a href="#if">{% if %}</a></li>
    
    <li><a href="#include">{% include %}</a></li>
    
    <li><a href="#inspect">{% inspect %}</a></li>
    
    <li><a href="#let">{% let %}</a></li>
    
    <li><a href="#markup">{% markup %}</a></li>
    
    <li><a href="#media">{% media %}</a></li>
    
    <li><a href="#render">{% render %}</a></li>
    
    <li><a href="#renderall">{% renderall %}</a></li>
    
    <li><a href="#singleline">{% singleline %}</a></li>
    
    <li><a href="#summarize">{% summarize %}</a></li>
    
    <li><a href="#trans">{% trans %}</a></li>
    
    <li><a href="#url">{% url %}</a></li>
    
    <li><a href="#urlencode">{% urlencode %}</a></li>
    
    <li><a href="#verbatim">{% verbatim %}</a></li>
    
    <li><a href="#with">{% with %}</a></li>
    
</ul></li>
    
</ul>
        </div>
        
    </div>
</div>

    <div id="push"></div>

    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Moya is &copy; 2014 <a href="#">Moya Software Foundation</a>.</p>
      </div>
    </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.js"></script>


</body>

</html>