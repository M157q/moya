<!DOCTYPE html>
<!-- saved from url=(0065)http://twitter.github.io/bootstrap/examples/starter-template.html -->
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Custom Tags</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Le styles -->
        <link href="assets/css/bootstrap.css" rel="stylesheet">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="assets/css/custom.css" rel="stylesheet">

        <style>
        
        </style>
    </head>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

  <body>
    <div id="wrap">
    <div id="main-nav" class="navbar navbar-default navbar-static-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".doc-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Moya Documentation</a>
            </div>
            <nav class="collapse navbar-collapse doc-navbar-collapse" role="navigation">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="index.html">Reference</a>
                    </li>
                    <li >
                        <a href="tags/index.html">Tags</a>
                    </li>
                    <li >
                        <a href="tutorial.html">Tutorial</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    
<div class="container">
    <div class="row">
        <div class="doc-content col-md-9">
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="expressions.html">&larr; 6. Expressions</a>
        </li>
        
        <li class="next">
            <a href="project.html">8. Building a Project &rarr;</a>
        </li>
    </ul>
</div>


            <h1>Custom Tags</h1>
            <p>Moya allows you to create <em>custom tags</em>, which may be used in the same way as the tags built in to Moya. Custom tags will help you catch errors and make your code more self-documenting.</p>
<aside>This features is known as <em>meta-programming</em> in other languages, as you are essentially adding language features to Moya itself.</aside><h2><a name="callable-tags"></a><a href="#callable-tags">Callable Tags<span class="anchor"> &#182;</span></a></h2><p>The first type of custom tag we will look at is the <em>callable</em> tag which &ndash; in many cases &ndash; can replace a <a href="moyacode.html#macro" title="Moya Code">macro</a>. First lets create a macro that we will replace with the custom tag. The following code calculates the first 20 <a href="http://en.wikipedia.org/wiki/Fibonacci_number">Fibonacci numbers</a>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;fib.xml&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns:let=</span><span class="attrib tag tagcontent">"http://moyaproject.com/let"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"><br></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">macro</span><span class="tag tagcontent">&nbsp;docname=</span><span class="attrib tag tagcontent">"fib"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">let</span><span class="tag tagcontent">&nbsp;fib=</span><span class="attrib tag tagcontent">"[0,&nbsp;1]"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">repeat</span><span class="tag tagcontent">&nbsp;times=</span><span class="attrib tag tagcontent">"count&nbsp;-&nbsp;2"</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">append</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"fib[-1]&nbsp;+&nbsp;fib[-2]"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"fib"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/repeat</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">return</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"fib"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/macro</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11"><br></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">macro</span><span class="tag tagcontent">&nbsp;docname=</span><span class="attrib tag tagcontent">"main"</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">call</span><span class="tag tagcontent">&nbsp;macro=</span><span class="attrib tag tagcontent">"fib"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"fib_list"</span><span class="tag tagcontent">&nbsp;let:count=</span><span class="attrib tag tagcontent">"20"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">echo</span><span class="tag tagcontent">&nbsp;obj=</span><span class="attrib tag tagcontent">"fib_list"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/macro</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16"><br></div><a name="line17"></a><div class="line line-17"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>This code should be somewhat familiar. If you save this code as <code>fib.xml</code>, you can run it in the debugger with the following command:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;run&nbsp;fib.xml&nbsp;--breakpoint</div></pre><p>If you step through this code you will see the main macro call fib, which returns a list and displays it in the terminal.</p>
<p>The following code will have the same output, but replaces the <a class="tag" href="tags/httpmoyaprojectcom/tag_macro.html">&lt;macro&gt;</a> with a custom tag called <code>fib</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;fib2.xml&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag tagcontent">&nbsp;xmlns:let=</span><span class="attrib tag tagcontent">"http://moyaproject.com/let"</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3"><br></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">tag</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"fib"</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">doc</span><span class="tag">&gt;</span>Calculate&nbsp;the&nbsp;Fibonacci&nbsp;sequence</span><span class="tag">&lt;</span><span class="endtagname tag">/doc</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">signature</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">attribute</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"count"</span><span class="tag tagcontent">&nbsp;type=</span><span class="attrib tag tagcontent">"integer"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/signature</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">let</span><span class="tag tagcontent">&nbsp;fib=</span><span class="attrib tag tagcontent">"[0,&nbsp;1]"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">repeat</span><span class="tag tagcontent">&nbsp;times=</span><span class="attrib tag tagcontent">"count&nbsp;-&nbsp;2"</span><span class="tag">&gt;</span></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">append</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"fib[-1]&nbsp;+&nbsp;fib[-2]"</span><span class="tag tagcontent">&nbsp;src=</span><span class="attrib tag tagcontent">"fib"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/repeat</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">return</span><span class="tag tagcontent">&nbsp;value=</span><span class="attrib tag tagcontent">"fib"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/tag</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15"><br></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">macro</span><span class="tag tagcontent">&nbsp;docname=</span><span class="attrib tag tagcontent">"main"</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">fib</span><span class="tag tagcontent">&nbsp;count=</span><span class="attrib tag tagcontent">"20"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"fib_list"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">echo</span><span class="tag tagcontent">&nbsp;obj=</span><span class="attrib tag tagcontent">"fib_list"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line19"></a><div class="line line-19">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/macro</span><span class="tag">&gt;</span></div><a name="line20"></a><div class="line line-20"><br></div><a name="line21"></a><div class="line line-21"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>The <a class="tag" href="tags/httpmoyaprojectcom/tag_tag.html">&lt;tag&gt;</a> tag creates the custom tag, it contains a <a class="tag" href="tags/httpmoyaprojectcom/tag_signature.html">&lt;signature&gt;</a> tag which tells Moya we are going to define the tag's attributes (known as the the tag's <em>signature</em>). In the example, the signature consists of a single <a class="tag" href="tags/httpmoyaprojectcom/tag_attribute.html">&lt;attribute&gt;</a> tag which defines an attribute called <code>name</code> with a <code>type</code> of <code>integer</code>. The <em>type</em> of an attribute tells Moya how the attribute should be processed. Moya will raise a helpful error, if the attribute isn't in the correct format (if you enter text for a integer attribute, for example).</p>
<p>The rest of the code inside the <a class="tag" href="tags/httpmoyaprojectcom/tag_tag.html">&lt;tag&gt;</a> is the same as the macro. Tags may also return a value which will be stored in the location specified by <code>dst</code>. The <code>dst</code> attribute is added to tag's signature automatically.</p>
<h3><a name="setting-the-application"></a><a href="#setting-the-application">Setting the Application<span class="anchor"> &#182;</span></a></h3><p>When you call a tag in a project, Moya needs to know which application contains the tag. If there is only one application installed for the library that defines the tag then Moya can detect the application automatically. Otherwise, you will need to specify the <code>from</code> attribute in the calling tag.</p>
<p>For example, let's say we have a library called <code>sushifinder.shop</code> installed as application <code>sushifinder</code>. It defines a tag called <code>get-specials</code> which gets a list of products on special. We might call it like this:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">sushi:</span><span class="tag tagname">get-specials</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"specials"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>This is fine as long as <code>sushifinder.shop</code> was installed just once. If we have installed it twice, we would need to specify the application when we call the tag. Here's an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag xmlns">sushi:</span><span class="tag tagname">get-specials</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"specials"</span><span class="tag tagcontent">&nbsp;from=</span><span class="attrib tag tagcontent">"sushifinder"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><aside>In practice, specifying the application doesn't happen very often. Most libraries are designed to be installed once.</aside><h2><a name="data-tags"></a><a href="#data-tags">Data Tags<span class="anchor"> &#182;</span></a></h2><p>Moya can create <em>data tags</em> which are a way of specifying structured data that may be difficult to express in the form of settings. A data tag may appear anywhere in your project (including in other libraries), and may be queried with <a class="tag" href="tags/httpmoyaprojectcom/tag_get-data.html">&lt;get-data&gt;</a>. Let's look at en example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="comment">&lt;!--&nbsp;datatag.xml&nbsp;--&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">moya</span><span class="tag">&gt;</span></div><a name="line3"></a><div class="line line-3">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">data-tag</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"product"</span><span class="tag">&gt;</span></div><a name="line4"></a><div class="line line-4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">doc</span><span class="tag">&gt;</span>A&nbsp;sushi&nbsp;product</span><span class="tag">&lt;</span><span class="endtagname tag">/doc</span><span class="tag">&gt;</span></div><a name="line5"></a><div class="line line-5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">signature</span><span class="tag">&gt;</span></div><a name="line6"></a><div class="line line-6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">attribute</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"name"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"yes"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line7"></a><div class="line line-7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">attribute</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"description"</span><span class="tag tagcontent">&nbsp;required=</span><span class="attrib tag tagcontent">"no"</span><span class="tag tagcontent">&nbsp;default=</span><span class="attrib tag tagcontent">""</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line8"></a><div class="line line-8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/signature</span><span class="tag">&gt;</span></div><a name="line9"></a><div class="line line-9">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/data-tag</span><span class="tag">&gt;</span></div><a name="line10"></a><div class="line line-10"><br></div><a name="line11"></a><div class="line line-11">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">product</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"Maguro&nbsp;Nigiri"</span><span class="tag tagcontent">&nbsp;description=</span><span class="attrib tag tagcontent">"A&nbsp;lean&nbsp;cut&nbsp;of&nbsp;tuna"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line12"></a><div class="line line-12">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">product</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"Kappa&nbsp;Maki"</span><span class="tag tagcontent">&nbsp;description=</span><span class="attrib tag tagcontent">"Cucumber"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line13"></a><div class="line line-13"><br></div><a name="line14"></a><div class="line line-14">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">macro</span><span class="tag tagcontent">&nbsp;docname=</span><span class="attrib tag tagcontent">"main"</span><span class="tag">&gt;</span></div><a name="line15"></a><div class="line line-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">get-data</span><span class="tag tagcontent">&nbsp;tag=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"products"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line16"></a><div class="line line-16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">echo</span><span class="tag tagcontent">&nbsp;obj=</span><span class="attrib tag tagcontent">"products"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line17"></a><div class="line line-17">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="endtagname tag">/macro</span><span class="tag">&gt;</span></div><a name="line18"></a><div class="line line-18"><br></div><a name="line19"></a><div class="line line-19"></span><span class="tag">&lt;</span><span class="endtagname tag">/moya</span><span class="tag">&gt;</span></div></pre><p>You can run the above code with the following:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">$&nbsp;moya&nbsp;run&nbsp;datatag.xml</div></pre><p>When you run this code, it will display a list containing two dictionaries which Moya has created from the (custom) <code>&lt;product&gt;</code> tags.</p>
<p>The main <a class="tag" href="tags/httpmoyaprojectcom/tag_macro.html">&lt;macro&gt;</a> calls <a class="tag" href="tags/httpmoyaprojectcom/tag_get-data.html">&lt;get-data&gt;</a> which returns a list of the tag data extracted from the attributes of the two <code>&lt;product&gt;</code> tags.</p>
<p>You can also retrieve data from a single data tag with <a class="tag" href="tags/httpmoyaprojectcom/tag_get-data-item.html">&lt;get-data-item&gt;</a>, which matches a single data tag based on the LET parameters you supply to it. Here's how you would use <a class="tag" href="tags/httpmoyaprojectcom/tag_get-data-item.html">&lt;get-data-item&gt;</a> to get the data from the <code>product</code> tag with a name of <code>"Kappa Maki"</code>:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1"></span><span class="tag">&lt;</span><span class="tag tagname">get-data-item</span><span class="tag tagcontent">&nbsp;tag=</span><span class="attrib tag tagcontent">"product"</span><span class="tag tagcontent">&nbsp;let:name=</span><span class="attrib tag tagcontent">"'Kappa&nbsp;Maki'"</span><span class="tag tagcontent">&nbsp;dst=</span><span class="attrib tag tagcontent">"kappa_maki"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2"></span><span class="tag">&lt;</span><span class="tag tagname">echo</span><span class="tag tagcontent">&nbsp;obj=</span><span class="attrib tag tagcontent">"kappa_maki"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><div class="alert alert-warning"><strong>NOTE</strong> Data tags do not contain executable code&ndash;Moya will ignore any data tags in a macro.</div><h3><a name="conditional-data-tags"></a><a href="#conditional-data-tags">Conditional Data Tags<span class="anchor"> &#182;</span></a></h3><p>Although data tags aren't executable, they do have an <code>if</code> attribute. This condition is checked when you get the data. If a data tag contains in <code>if</code> attribute which evaluates to False, the tag is omitted from the data. Here's an example:</p>
<pre class="moya-console format-xml"><a name="line1"></a><div class="line line-1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">product</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"Maguro&nbsp;Nigiri"</span><span class="tag tagcontent">&nbsp;description=</span><span class="attrib tag tagcontent">"A&nbsp;lean&nbsp;cut&nbsp;of&nbsp;tuna"</span><span class="tag tagcontent">&nbsp;if=</span><span class="attrib tag tagcontent">".settings.tuna-in-stock.bool"</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div><a name="line2"></a><div class="line line-2">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tag">&lt;</span><span class="tag tagname">product</span><span class="tag tagcontent">&nbsp;name=</span><span class="attrib tag tagcontent">"Kappa&nbsp;Maki"</span><span class="tag tagcontent">&nbsp;description=</span><span class="attrib tag tagcontent">"Cucumber"</span><span class="tag tagcontent">&nbsp;</span><span class="endtagname tag">/</span><span class="tag">&gt;</span></div></pre><p>A call to <a class="tag" href="tags/httpmoyaprojectcom/tag_get-data.html">&lt;get-data&gt;</a> now may return one item or two, depending on the value of <code>tuna-in-stock</code> in the settings.</p>
<h2><a name="tag-namespaces"></a><a href="#tag-namespaces">Tag Namespaces<span class="anchor"> &#182;</span></a></h2><p>When creating custom tags in a project, they are defined in the XML <a href="xml.html#namespaces" title="XML">namespace</a> specified in the library's <a href="library.html#lib-section" title="Creating a Library">lib.ini</a>. Alternatively you can specify the namespace for the tag with the <code>ns</code> attribute of <a class="tag" href="tags/httpmoyaprojectcom/tag_tag.html">&lt;tag&gt;</a>. Moya doesn't place any restrictions on the namespace you use, but it is advisable to use a namespace from a domain you own. If you don't have a domain name, then you can use the following:</p>
<pre class="moya-console format-"><a name="line1"></a><div class="line line-1">http://ns.moyaproject.com/&lt;organization&gt;/&lt;library&nbsp;name&gt;/</div></pre><p>Replace <code>&lt;organization&gt;</code> with the name of your orginization (or your own name) and <code>&lt;library name&gt;</code> with the <em>long name</em> of your library.
</p>
            

<div class="doc-nav">
    <ul class="pager">
        <li class="previous">
            <a href="expressions.html">&larr; 6. Expressions</a>
        </li>
        
        <li class="next">
            <a href="project.html">8. Building a Project &rarr;</a>
        </li>
    </ul>
</div>


        </div>
        
        <div class="doctree-panel col-md-3">
        <ul>
    
    <li><a href="#callable-tags">Callable Tags</a><ul>
    
    <li><a href="#setting-the-application">Setting the Application</a></li>
    
</ul></li>
    
    <li><a href="#data-tags">Data Tags</a><ul>
    
    <li><a href="#conditional-data-tags">Conditional Data Tags</a></li>
    
</ul></li>
    
    <li><a href="#tag-namespaces">Tag Namespaces</a></li>
    
</ul>
        </div>
        
    </div>
</div>

    <div id="push"></div>

    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Moya is &copy; 2014 <a href="#">Moya Software Foundation</a>.</p>
      </div>
    </div>

    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.js"></script>


</body>

</html>